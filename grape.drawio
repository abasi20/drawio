<mxfile host="app.diagrams.net" modified="2024-03-18T01:48:24.461Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36" etag="uO0NZZI2oFE7jywm6K3j" version="24.0.7" type="github">
  <diagram name="第 1 页" id="_LWxpe4USPmuvCCVt4sQ">
    <mxGraphModel dx="813" dy="763" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <UserObject label="&lt;p class=&quot;MsoNormal&quot;&gt;图计算引擎分析&lt;span lang=&quot;EN-US&quot;&gt;——GRAPE&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h1&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-tab-count:1&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;font-size:19.5pt&quot;&gt;前言&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h1&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;GRAPE&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;是&lt;span lang=&quot;EN-US&quot;&gt;2017&lt;/span&gt;年发表的分布式并行图计算系统。&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;在计算模型实现动态更新的问题。&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;在设计上采用&lt;span lang=&quot;EN-US&quot;&gt;BSP&lt;/span&gt;并行计算模型，要求每一个超步算法设计必须满足分配率的原则。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;GRAPE&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;引擎可以模拟实现&lt;span lang=&quot;EN-US&quot;&gt;BSP&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;PRAM&lt;/span&gt;（&lt;span lang=&quot;EN-US&quot;&gt;(Parallel Random Access Machine&lt;/span&gt;）、&lt;span lang=&quot;EN-US&quot;&gt;MapReduce&lt;/span&gt;类算法，实现插件式无障碍改写。保证计算的正确性。&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;支持了遍历、模式匹配、连通性计算、协同过滤等算法。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:&#xa;0pt&quot;&gt;原文中提到了优势：&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:&#xa;0pt&quot;&gt;简化编码：&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;只需要用户提供三个顺序算法即可（&lt;span lang=&quot;EN-US&quot;&gt;PEval&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;IncEval&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;Assemble Partial Result&lt;/span&gt;），并行计算由引擎保证；&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:&#xa;0pt&quot;&gt;半自动化并行计算：只要算法实现满足顺序执行正确，那么也能保证期并发执行的正确性；&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:&#xa;0pt&quot;&gt;图级别的优化：在架构层面上，为图提供了索引、压缩、分区等进行了优化；&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:&#xa;0pt&quot;&gt;更好的性能：对比现有以点为中心的计算引擎&lt;span lang=&quot;EN-US&quot;&gt;Giraph&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;GraphLab&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;Blogel&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;不但降低编程的复杂度，而且也在性能上取得了优秀的效果。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;GRAPE&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;在设计遵循&lt;span lang=&quot;EN-US&quot;&gt;“think&#xa;like a graph”&lt;/span&gt;的设计，将分布式图分析问题解耦为多个单机、顺序、子图求解问题。从设计上来说，多个子图的计算是相互独立的，为了协调计算分布式计算的一致性，&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;引入了协调器&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:&#xa;0pt&quot;&gt;，&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;上并不保存&lt;span lang=&quot;EN-US&quot;&gt;edge&lt;/span&gt;数据。&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;在两个超步之间扮演着重要的角色，如果更新量比较大，&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;势必会成为系统的瓶颈。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan;mso-outline-level:&#xa;1&quot;&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:19.5pt;font-family:宋体;mso-bidi-font-family:&#xa;宋体;mso-font-kerning:18.0pt&quot;&gt;GRAPE&lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span style=&quot;font-size:19.5pt;&#xa;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:18.0pt&quot;&gt;架构设计&lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:24.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:18.0pt&quot;&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;GRAPE&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;同时支持切点、切边的&lt;span lang=&quot;EN-US&quot;&gt;Partition&lt;/span&gt;策略，用户可根据算法灵活选择；用户可根据数据规模、算法控制集群规模。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; style=&quot;tab-stops:44.65pt&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-no-proof:yes&quot;&gt;&lt;img width=&quot;415&quot; height=&quot;241&quot; src=&quot;file:////Users/wangjun126/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image001.png&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;查询初始阶段：在第一个超步之前，协调器&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;负责向所有的&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;发送相同的&lt;span lang=&quot;EN-US&quot;&gt;Query&lt;/span&gt;，并且在两个超步之间负责协调计算数据。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;并行计算模型可拆分为三个部分：&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;1.PEval&lt;/span&gt;：在第一个超步中，在本地子图上计算，生成初始计算结果，并将&lt;span lang=&quot;EN-US&quot;&gt;Q(Fi)&lt;/span&gt;结果&lt;span lang=&quot;EN-US&quot;&gt;Mi&lt;/span&gt;发送给&lt;span lang=&quot;EN-US&quot;&gt;P0;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;2.IncEval:&lt;/span&gt;分为两部分。&lt;span lang=&quot;EN-US&quot;&gt;a.P0&lt;/span&gt;获取并汇总其他&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;（&lt;span lang=&quot;EN-US&quot;&gt;Pi&lt;/span&gt;）是否有更新操作；&lt;span lang=&quot;EN-US&quot;&gt;b.worker&#xa;Pi &lt;/span&gt;获取&lt;span lang=&quot;EN-US&quot;&gt;Q(Fi ⊕Mi)&lt;/span&gt;进行&lt;span lang=&quot;EN-US&quot;&gt;IncEval&lt;/span&gt;计算更新&lt;span lang=&quot;EN-US&quot;&gt;Fi&lt;/span&gt;数据，&lt;span lang=&quot;EN-US&quot;&gt;1&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;2&lt;/span&gt;步循环计算&lt;span lang=&quot;EN-US&quot;&gt;,&lt;/span&gt;直至迭代结果收敛；&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;3.Assemble&lt;/span&gt;：&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;从所有&lt;span lang=&quot;EN-US&quot;&gt;Worker&lt;/span&gt;上拉取结果，并聚合生成最终结果，算法执行完成。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; style=&quot;tab-stops:44.65pt&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-no-proof:yes&quot;&gt;&lt;img width=&quot;415&quot; height=&quot;317&quot; src=&quot;file:////Users/wangjun126/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image002.png&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; style=&quot;tab-stops:44.65pt&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-no-proof:yes&quot;&gt;&lt;img width=&quot;415&quot; height=&quot;269&quot; src=&quot;file:////Users/wangjun126/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image003.png&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;原文认为&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;在以下五个方面做出了贡献：&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;（&lt;span lang=&quot;EN-US&quot;&gt;1&lt;/span&gt;）引入&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;并行模型&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;（&lt;span lang=&quot;EN-US&quot;&gt;2&lt;/span&gt;）理论证明了&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;的正确性；通过实验证明了&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;可以替代&lt;span lang=&quot;EN-US&quot;&gt;MapReduce&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;BSP&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;PRAM&lt;/span&gt;。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;（&lt;span lang=&quot;EN-US&quot;&gt;3&lt;/span&gt;）在&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;上实现不同种类的图计算算法（图遍历类、匹配类、联通度类、协同过滤类）。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;（&lt;span lang=&quot;EN-US&quot;&gt;4&lt;/span&gt;）&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;支持并行计算、消息传递、容错、一致性。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;（&lt;span lang=&quot;EN-US&quot;&gt;5&lt;/span&gt;）对比通过实验对比了三种引擎：&lt;span lang=&quot;EN-US&quot;&gt;BSP&lt;/span&gt;以点为中心的&lt;span lang=&quot;EN-US&quot;&gt;Giraph&lt;/span&gt;、异步以点为中心的&lt;span lang=&quot;EN-US&quot;&gt;GraphLab&lt;/span&gt;、以块为中心的&lt;span lang=&quot;EN-US&quot;&gt;Blogel&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;的性能是最优的。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h1&gt;&lt;span style=&quot;font-size:19.5pt&quot;&gt;以点为中心、以边为中心、以子图为中心计算模式的比较&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h1&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;在分布式计算系统中，系统的瓶颈往往卡在&lt;span lang=&quot;EN-US&quot;&gt;IO&lt;/span&gt;吞吐（其中&lt;span lang=&quot;EN-US&quot;&gt;IO&lt;/span&gt;包括网络&lt;span lang=&quot;EN-US&quot;&gt;IO&lt;/span&gt;和磁盘&lt;span lang=&quot;EN-US&quot;&gt;IO&lt;/span&gt;）。在现有的硬件基础上，如何降低&lt;span lang=&quot;EN-US&quot;&gt;IO&lt;/span&gt;开销就成为了解决分布式系统的核心问题。下面列举了三种编程模式及代表框架：&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;table class=&quot;MsoNormalTable&quot; border=&quot;1&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; style=&quot;border-collapse:collapse;mso-yfti-tbllook:1184&quot;&gt;&#xa; &lt;tbody&gt;&lt;tr style=&quot;mso-yfti-irow:0;mso-yfti-firstrow:yes&quot;&gt;&#xa;  &lt;td width=&quot;165&quot; style=&quot;width:123.75pt;padding:.75pt .75pt .75pt .75pt&quot;&gt;&#xa;  &lt;p class=&quot;sl-paragraph&quot;&gt;&lt;strong&gt;&lt;span style=&quot;font-family:宋体;mso-bidi-font-family:&#xa;  宋体&quot;&gt;计算模式&lt;/span&gt;&lt;/strong&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;  &lt;/td&gt;&#xa;  &lt;td width=&quot;375&quot; style=&quot;width:281.25pt;padding:.75pt .75pt .75pt .75pt&quot;&gt;&#xa;  &lt;p class=&quot;sl-paragraph&quot;&gt;&lt;strong&gt;&lt;span style=&quot;font-family:宋体;mso-bidi-font-family:&#xa;  宋体&quot;&gt;代表性框架&lt;/span&gt;&lt;/strong&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;  &lt;/td&gt;&#xa; &lt;/tr&gt;&#xa; &lt;tr style=&quot;mso-yfti-irow:1&quot;&gt;&#xa;  &lt;td width=&quot;165&quot; style=&quot;width:123.75pt;padding:.75pt .75pt .75pt .75pt&quot;&gt;&#xa;  &lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span style=&quot;font-size:16.5pt&quot;&gt;以点为中心&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;  &lt;/td&gt;&#xa;  &lt;td width=&quot;375&quot; style=&quot;width:281.25pt;padding:.75pt .75pt .75pt .75pt&quot;&gt;&#xa;  &lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;Graphx&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;GraphLab&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;PowerGraph&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;Gemini&lt;/span&gt;等&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;  &lt;/td&gt;&#xa; &lt;/tr&gt;&#xa; &lt;tr style=&quot;mso-yfti-irow:2&quot;&gt;&#xa;  &lt;td width=&quot;165&quot; style=&quot;width:123.75pt;padding:.75pt .75pt .75pt .75pt&quot;&gt;&#xa;  &lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span style=&quot;font-size:16.5pt&quot;&gt;以边为中心&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;  &lt;/td&gt;&#xa;  &lt;td width=&quot;375&quot; style=&quot;width:281.25pt;padding:.75pt .75pt .75pt .75pt&quot;&gt;&#xa;  &lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;X-Stream&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;GridGraph&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot; style=&quot;color:#121212&quot;&gt;Chaos&lt;/span&gt;&lt;span style=&quot;color:#121212&quot;&gt;等&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;  &lt;/td&gt;&#xa; &lt;/tr&gt;&#xa; &lt;tr style=&quot;mso-yfti-irow:3;mso-yfti-lastrow:yes&quot;&gt;&#xa;  &lt;td width=&quot;165&quot; style=&quot;width:123.75pt;padding:.75pt .75pt .75pt .75pt&quot;&gt;&#xa;  &lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span style=&quot;font-size:16.5pt&quot;&gt;以子图为中心&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;  &lt;/td&gt;&#xa;  &lt;td width=&quot;375&quot; style=&quot;width:281.25pt;padding:.75pt .75pt .75pt .75pt&quot;&gt;&#xa;  &lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;Giraph++&lt;/span&gt;等&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;  &lt;/td&gt;&#xa; &lt;/tr&gt;&#xa;&lt;/tbody&gt;&lt;/table&gt;&#xa;&#xa;&lt;h2&gt;&lt;span style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;以点为中心&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;自&lt;span lang=&quot;EN-US&quot;&gt;Pregel&lt;/span&gt;发布以来，绝大部分开源引擎都采用以点为中心的计算模式，用户只需要考虑处理点的逻辑，通过边进行数据传播，进而扩展到整图。通过&lt;span lang=&quot;EN-US&quot;&gt;BSP&lt;/span&gt;模式控制整个计算过程。框架有&lt;span lang=&quot;EN-US&quot;&gt;Graphx&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;Giraph&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;GraphLab&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;PowerGraph&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;Gemini&lt;/span&gt;等。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;Pregel&lt;/span&gt;引入了&lt;span lang=&quot;EN-US&quot;&gt;GAS&lt;/span&gt;模式，&lt;span lang=&quot;EN-US&quot;&gt;GAS&lt;/span&gt;模式一般采用以点为中心的计算模式。以点为中心的计算模式更符合人的思维模式，算法表示更直观形象。将&lt;span lang=&quot;EN-US&quot;&gt;Pregel&lt;/span&gt;中的每个&lt;span lang=&quot;EN-US&quot;&gt;SuperStep&lt;/span&gt;一分为三，每个&lt;span lang=&quot;EN-US&quot;&gt;SubStep&lt;/span&gt;上对应一个用户自定义的操作。一方面使得用户的自由度更大，另一方面能明显提升个&lt;span lang=&quot;EN-US&quot;&gt;SubStep&lt;/span&gt;直接的并行计算性能，特别是当顶点关联的边非常大的时候。&lt;span lang=&quot;EN-US&quot;&gt;GAS&lt;/span&gt;计算模式在图计算框架&lt;span lang=&quot;EN-US&quot;&gt;PoweGraph&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;GraphLab&lt;/span&gt;中得到了很好的应用，并且在大规模关系网络或复杂图上取得了非常不错的效果。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;而&lt;span lang=&quot;EN-US&quot;&gt;Gemini&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;Plato&lt;/span&gt;将点分为若干段，并采用双更新模式（&lt;span lang=&quot;EN-US&quot;&gt;Push/Pull&lt;/span&gt;）替代了&lt;span lang=&quot;EN-US&quot;&gt;GAS&lt;/span&gt;模式，通过更新模式的选择减少了网络&lt;span lang=&quot;EN-US&quot;&gt;IO&lt;/span&gt;量。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;以点为中心的计算模式计算效率更快，更符合人的编码思维；但支持的图规模有限。往往更适用于对实时性要求较高的场景，&lt;strong&gt;&lt;span style=&quot;font-family:宋体;mso-bidi-font-family:宋体&quot;&gt;准实时性&lt;/span&gt;&lt;/strong&gt;业务。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h2&gt;&lt;span style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;以边为中心&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#121212&quot;&gt;X-Stream&lt;/span&gt;&lt;span style=&quot;color:#121212&quot;&gt;是单机&lt;span lang=&quot;EN-US&quot;&gt;in-memory&lt;/span&gt;和核外计算引擎，都将顶点分为若干区间，通过调度算法使顶点区间能放入内存中。处理一批边时，目的顶点的数据会被调度到内存中，当更新则通过&lt;/span&gt;流式处理（&lt;span lang=&quot;EN-US&quot;&gt;streaming&lt;/span&gt;）&lt;span style=&quot;color:#121212&quot;&gt;的形式从外存顺序读入或写出。&lt;span lang=&quot;EN-US&quot;&gt;GridGraph&lt;/span&gt;借鉴了&lt;span lang=&quot;EN-US&quot;&gt;X-Stream&lt;/span&gt;设计思想，使用&lt;span lang=&quot;EN-US&quot;&gt;2-level&lt;/span&gt;调度算法降低不必要的开销，优化了系统&lt;span lang=&quot;EN-US&quot;&gt;IO&lt;/span&gt;。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;Chaos&lt;/span&gt;是&lt;span lang=&quot;EN-US&quot;&gt;X-Stream&lt;/span&gt;的基于外存的分布式实现，系统通过&lt;span lang=&quot;EN-US&quot;&gt;GAS&lt;/span&gt;的方式，通过每台机器上的副本点收集数据，&lt;span lang=&quot;EN-US&quot;&gt;Apply&lt;/span&gt;阶段统计更新&lt;span lang=&quot;EN-US&quot;&gt;master vertex&lt;/span&gt;。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;以边为中心的编程模式通常借助了大容量外存扩展了内存上限，在计算效率上明显会低于以点为中心的方式，所以主要应用场景就是超大图上。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;以边为中心的图计算系统瓶颈通常是磁盘的&lt;span lang=&quot;EN-US&quot;&gt;io&lt;/span&gt;，这也是为什么在论文实验中一般都采用&lt;span lang=&quot;EN-US&quot;&gt;SSD&lt;/span&gt;硬盘的原因。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h2&gt;&lt;span style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;以子图为中心&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;上述两种计算方式只可访问一跳（&lt;span lang=&quot;EN-US&quot;&gt;one hop&lt;/span&gt;）的邻居节点。以子图为中心的计算模式通常本地存储一张子图，提高了邻居节点的访问效率。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;Giraph++&lt;/span&gt;论文中描述以子图为中心设计思想，按照&lt;span lang=&quot;EN-US&quot;&gt;vid&lt;/span&gt;的范围将图切分为&lt;span lang=&quot;EN-US&quot;&gt;n&lt;/span&gt;个子图。下图是&lt;span lang=&quot;EN-US&quot;&gt;Giraph++&lt;/span&gt;的&lt;span lang=&quot;EN-US&quot;&gt;Connected Component&lt;/span&gt;算法图示。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-no-proof:yes&quot;&gt;&lt;img width=&quot;415&quot; height=&quot;182&quot; src=&quot;file:////Users/wangjun126/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image004.png&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;也采用以子图为中心的计算模式。超步之间必须满足分配率的原则。&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;尽可能在一个超步中完成子图计算，减少网络&lt;span lang=&quot;EN-US&quot;&gt;IO&lt;/span&gt;。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;从理论上来讲，如果存储子图的跳数越深，子图遍历优势越明显。但是子图跳数越多，需要的存储空间也会成几何倍数增长。&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;中保存了&lt;span lang=&quot;EN-US&quot;&gt;2hop&lt;/span&gt;图。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;Giraph++&lt;/span&gt;也指出：尽量降低跨区域访问边，减少不必要的通信开销。子图的切分应该尽量保证满足&lt;span lang=&quot;EN-US&quot;&gt;Connected Component&lt;/span&gt;（&lt;span lang=&quot;EN-US&quot;&gt;CC&lt;/span&gt;）算法。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;假设：所有的&lt;span lang=&quot;EN-US&quot;&gt;Fragment&lt;/span&gt;切分都满足&lt;span lang=&quot;EN-US&quot;&gt;CC&lt;/span&gt;切分，超步之间的交换数据就会很少，此时引擎执行效率应该更高。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h1&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:19.5pt&quot;&gt;GRAPE&lt;/span&gt;&lt;span style=&quot;font-size:19.5pt&quot;&gt;编程模式&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h1&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;遵循&lt;span lang=&quot;EN-US&quot;&gt;BSP&lt;/span&gt;模式，由&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;节点调度其它&lt;span lang=&quot;EN-US&quot;&gt;Worker&lt;/span&gt;（&lt;span lang=&quot;EN-US&quot;&gt;1..m&lt;/span&gt;）节点的计算。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;从形象上来说上图与葡萄的结构很像，可能也是取名为&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;的原因之一。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h2&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;graph storage&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;header-only partitions fragment&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;CSC\CSR&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#252933;background:#F2F3F5&quot;&gt;flat_hash_map&#xa;&lt;/span&gt;&lt;span style=&quot;color:#252933;background:#F2F3F5&quot;&gt;是一种极其轻量级的哈希表实现，它在保证常数小的前提下有着非常优秀的性能。&lt;span lang=&quot;EN-US&quot;&gt;flat_hash_map &lt;/span&gt;使用线性探测法解决冲突，并且可以通过按需分配内存来减少空间开销。相对于&lt;span lang=&quot;EN-US&quot;&gt; unordered_map&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;flat_hash_map &lt;/span&gt;的插入&lt;span lang=&quot;EN-US&quot;&gt;/&lt;/span&gt;删除时间略长，但查找时间更短。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;使用&lt;span lang=&quot;EN-US&quot;&gt;flat_hash_map&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h2&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;The Parallel&#xa;Model of GRAPE&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;采用以子图为中心的计算，将&lt;span lang=&quot;EN-US&quot;&gt;Process&lt;/span&gt;本地子图的计算抽象为顺序计算。&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;将此编程模式定义为&lt;span lang=&quot;EN-US&quot;&gt;PIE(PEval-IncEval-Assemble)&lt;/span&gt;。采用了先局部后增量计算模式，通过每一轮的超步运算达到计算的收敛；最终由&lt;span lang=&quot;EN-US&quot;&gt;Assemble&lt;/span&gt;汇总查询结果。下面将对这三个阶段展开说明。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h2&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;PEval:Partial&#xa;Evaluation&lt;/span&gt;&lt;span style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;（局部结果评估）&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;将&lt;span lang=&quot;EN-US&quot;&gt;Query&lt;/span&gt;分发到&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;节点之后，其余&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;节点会初始化本地&lt;span lang=&quot;EN-US&quot;&gt;master&lt;/span&gt;节点的状态，根据&lt;span lang=&quot;EN-US&quot;&gt;Query&lt;/span&gt;更新并记录邻居节点的状态信息。&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;节点会根据计算结果生成更新参数，并且发送给&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;。下面我们提到的&lt;span lang=&quot;EN-US&quot;&gt;woker&lt;/span&gt;与&lt;span lang=&quot;EN-US&quot;&gt;processor&lt;/span&gt;概念是一致（&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;也是&lt;span lang=&quot;EN-US&quot;&gt;workers&lt;/span&gt;之一）。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h2&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;IncEval:&#xa;Incremental Evaluation &lt;/span&gt;&lt;span style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;（增量数据评估）&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&#xa;&#xa;&lt;p class=&quot;sl-list&quot; style=&quot;margin-left:36.0pt;text-indent:-18.0pt;mso-list:l0 level1 lfo1;&#xa;tab-stops:list 36.0pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:&#xa;10.0pt;mso-bidi-font-size:12.0pt;font-family:Symbol;mso-fareast-font-family:&#xa;Symbol;mso-bidi-font-family:Symbol&quot;&gt;&lt;span style=&quot;mso-list:Ignore&quot;&gt;·&lt;span style=&quot;font:7.0pt &amp;quot;Times New Roman&amp;quot;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span dir=&quot;LTR&quot;&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;在接收到所有&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;消息之后，需根据更新信息判断每一个&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;的状态。如果此所有的&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;已经&lt;span lang=&quot;EN-US&quot;&gt;inactive&lt;/span&gt;，则驱动此&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;的&lt;span lang=&quot;EN-US&quot;&gt;Assemble&lt;/span&gt;过程并中断。否则会&lt;span lang=&quot;EN-US&quot;&gt;route&lt;/span&gt;上一个超步的消息到此&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;。启动下一轮超步。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-list&quot; style=&quot;margin-left:36.0pt;text-indent:-18.0pt;mso-list:l0 level1 lfo1;&#xa;tab-stops:list 36.0pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:&#xa;10.0pt;mso-bidi-font-size:12.0pt;font-family:Symbol;mso-fareast-font-family:&#xa;Symbol;mso-bidi-font-family:Symbol&quot;&gt;&lt;span style=&quot;mso-list:Ignore&quot;&gt;·&lt;span style=&quot;font:7.0pt &amp;quot;Times New Roman&amp;quot;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span dir=&quot;LTR&quot;&gt;&lt;/span&gt;当&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;接收到&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;的更新消息后&lt;span lang=&quot;EN-US&quot;&gt;Q(Fi+Mi)&lt;/span&gt;的增量计算&lt;span lang=&quot;EN-US&quot;&gt;IncEval&lt;/span&gt;，在本地子图&lt;span lang=&quot;EN-US&quot;&gt;Fi&lt;/span&gt;上，将&lt;span lang=&quot;EN-US&quot;&gt;Mi&lt;/span&gt;进行计算，并向&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;发送计算结果。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;认为&lt;span lang=&quot;EN-US&quot;&gt;IncEval&lt;/span&gt;都利用了上一超步的计算结果，加锁每一超步的计算效率。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h2&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;Assemble Partial&#xa;Results(&lt;/span&gt;&lt;span style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;结果聚合&lt;span lang=&quot;EN-US&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;如果&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;认为已经没有参数变化更新了，&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;会主动从&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;上拉取结果，生成&lt;span lang=&quot;EN-US&quot;&gt;Query&lt;/span&gt;结果。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h1&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:19.5pt&quot;&gt;GRAPE API&lt;/span&gt;&lt;span style=&quot;font-size:19.5pt&quot;&gt;设计&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h1&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;开源两套代码：&lt;span lang=&quot;EN-US&quot;&gt;GraphScope&lt;/span&gt;及&lt;span lang=&quot;EN-US&quot;&gt;libgrape-lite&lt;/span&gt;。底层分析引擎实现是相同的，&lt;span lang=&quot;EN-US&quot;&gt;libgrape-lite&lt;/span&gt;提供了基础的分析框架，本文中将分析&lt;span lang=&quot;EN-US&quot;&gt;libgrape-lite&lt;/span&gt;的代码。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;libgrape-lite&lt;/span&gt;提供&lt;span lang=&quot;EN-US&quot;&gt;header&#xa;only&lt;/span&gt;基础库。此处分析参考：&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://github.com/alibaba/libgrape-lite/tree/v0.1.0&quot;&gt;https://github.com/alibaba/libgrape-lite/tree/v0.1.0&lt;span lang=&quot;EN-US&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;。&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;代码结构：&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; style=&quot;tab-stops:44.65pt&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-no-proof:yes&quot;&gt;&lt;img border=&quot;0&quot; width=&quot;415&quot; height=&quot;228&quot; src=&quot;file:////Users/wangjun126/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image005.png&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h2&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;GRAPE&lt;/span&gt;&lt;span style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;框架结构&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;下文为&lt;span lang=&quot;EN-US&quot;&gt;GraphScope&lt;/span&gt;框架设计，下面直接引用论文中的框架图。&lt;span lang=&quot;EN-US&quot;&gt;libgrape-lite&lt;/span&gt;仅提供了&lt;span lang=&quot;EN-US&quot;&gt;GRAPH Query Engine&lt;/span&gt;。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-no-proof:yes&quot;&gt;&lt;img border=&quot;0&quot; width=&quot;415&quot; height=&quot;430&quot; src=&quot;file:////Users/wangjun126/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image006.png&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;需要注意&lt;span lang=&quot;EN-US&quot;&gt;message &lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;&#xa;context&lt;/span&gt;的使用&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h3&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:15.0pt;line-height:173%&quot;&gt;Architecture&#xa;overview&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h3&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;在设计上利用率&lt;span lang=&quot;EN-US&quot;&gt;OpenMPI&#xa;mpp&lt;/span&gt;处理能力。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;构图&lt;span lang=&quot;EN-US&quot;&gt; rebalance&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-no-proof:yes&quot;&gt;&lt;img border=&quot;0&quot; width=&quot;415&quot; height=&quot;259&quot; src=&quot;file:////Users/wangjun126/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image007.png&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-no-proof:yes&quot;&gt;&lt;img border=&quot;0&quot; width=&quot;415&quot; height=&quot;305&quot; src=&quot;file:////Users/wangjun126/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image008.png&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;create and Query&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;模板参数定义：&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:blue&quot;&gt;template&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#3B3B3B&quot;&gt; &amp;lt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:&#xa;blue&quot;&gt;typename&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#267F99&quot;&gt;OID_T&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#3B3B3B&quot;&gt;, &lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:blue&quot;&gt;typename&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#267F99&quot;&gt;VID_T&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:&#xa;#3B3B3B&quot;&gt;, &lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:blue&quot;&gt;typename&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#267F99&quot;&gt;VDATA_T&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#3B3B3B&quot;&gt;, &lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:blue&quot;&gt;typename&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#267F99&quot;&gt;EDATA_T&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#3B3B3B&quot;&gt;,&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:blue&quot;&gt;LoadStrategy&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#267F99&quot;&gt;load_strategy&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#3B3B3B&quot;&gt;, &lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:blue&quot;&gt;template&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#3B3B3B&quot;&gt; &amp;lt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:&#xa;blue&quot;&gt;class&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#3B3B3B&quot;&gt;&amp;gt; &lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:blue&quot;&gt;class&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#267F99&quot;&gt;APP_T&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#3B3B3B&quot;&gt;,&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:blue&quot;&gt;typename&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#3B3B3B&quot;&gt;... &lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#267F99&quot;&gt;Args&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#3B3B3B&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#267F99&quot;&gt;Args&lt;/span&gt;&lt;span style=&quot;color:#267F99&quot;&gt;为算法的参数&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h3&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:15.0pt;line-height:173%&quot;&gt;Message passing&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h3&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;local (&lt;/span&gt;零拷贝&lt;span lang=&quot;EN-US&quot;&gt;)&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;通过&lt;span lang=&quot;EN-US&quot; style=&quot;color:#795E26&quot;&gt;MPI_Recv&lt;/span&gt;&lt;span style=&quot;color:#795E26&quot;&gt;、&lt;span lang=&quot;EN-US&quot;&gt;MPI_Send&lt;/span&gt;通过&lt;span lang=&quot;EN-US&quot;&gt;send_tag&lt;/span&gt;区分数据。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h3&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:15.0pt;line-height:173%&quot;&gt;Graph partition&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h3&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;切图&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h3&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:15.0pt;line-height:173%&quot;&gt;Graph-level&#xa;optimization&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h3&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;Load balancing&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;Fault tolerance&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;Consistency&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h2&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;sssp&lt;/span&gt;&lt;span style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;算法实现&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;在算法实现上，用户自定义算法类中只需要实现&lt;span lang=&quot;EN-US&quot;&gt;PEval&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;IncEval&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;Assemble&lt;/span&gt;三个函数。当我们阅读开源版本时，会发现&lt;span lang=&quot;EN-US&quot;&gt;libgrape&lt;/span&gt;是简化了输出这一部分功能，当计算收敛时，由&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;直接调用&lt;span lang=&quot;EN-US&quot;&gt;context&lt;/span&gt;的&lt;span lang=&quot;EN-US&quot;&gt;output&lt;/span&gt;方法负责输出。算法类是不需要实现&lt;span lang=&quot;EN-US&quot;&gt;Assemble&lt;/span&gt;函数的，&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;提供了&lt;span lang=&quot;EN-US&quot;&gt;3&lt;/span&gt;种&lt;span lang=&quot;EN-US&quot;&gt;AppBase&lt;/span&gt;（&lt;span lang=&quot;EN-US&quot;&gt;ParallelAppBase&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot; style=&quot;color:#267F99&quot;&gt;AutoAppBase&lt;/span&gt;&lt;span style=&quot;color:#267F99&quot;&gt;、&lt;span lang=&quot;EN-US&quot;&gt;BatchShuffleAppBase&lt;/span&gt;&lt;/span&gt;），以下为&lt;span lang=&quot;EN-US&quot;&gt;ParallelAppBase&lt;/span&gt;基类为例：&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;SSSPContext&lt;/span&gt;：数据计算&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;template &amp;lt;typename FRAG_T, typename CONTEXT_T&amp;gt;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;class ParallelAppBase {&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt; public:&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;static constexpr bool need_split_edges = false;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;static constexpr bool need_split_edges_by_fragment = false;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;static constexpr MessageStrategy message_strategy =&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;MessageStrategy::kSyncOnOuterVertex;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;static constexpr LoadStrategy load_strategy = LoadStrategy::kOnlyOut;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;using message_manager_t = ParallelMessageManager;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;ParallelAppBase() = default;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;virtual ~ParallelAppBase() = default;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;/**&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @brief Partial evaluation to implement.&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @note: This pure virtual function works as an interface, instructing users&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* to implement in the specific app. The PEval in the inherited apps would be&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* invoked directly, not via virtual functions.&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;*&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param graph // &lt;/span&gt;论文中的&lt;span lang=&quot;EN-US&quot;&gt;Fi&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param context //&lt;/span&gt;计算时本轮计算的输入、输出结果&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param messages//&lt;/span&gt;发送消息的&lt;span lang=&quot;EN-US&quot;&gt;channle&lt;/span&gt;，交由&lt;span lang=&quot;EN-US&quot;&gt;message manage&lt;/span&gt;负责发送&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;*/&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;virtual void PEval(const FRAG_T&amp;amp; graph, CONTEXT_T&amp;amp; context,&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;message_manager_t&amp;amp; messages) = 0;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;/**&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @brief Incremental evaluation to implement.&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;*&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @note: This pure virtual function works as an interface, instructing users&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* to implement in the specific app. The IncEval in the inherited apps would&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* be invoked directly, not via virtual functions.&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;*&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param graph //&lt;/span&gt;论文中的&lt;span lang=&quot;EN-US&quot;&gt;Fi&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param context//&lt;/span&gt;计算时本轮计算的输入、输出结果&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param messages//&lt;/span&gt;发送消息的&lt;span lang=&quot;EN-US&quot;&gt;channle&lt;/span&gt;，交由&lt;span lang=&quot;EN-US&quot;&gt;message manage&lt;/span&gt;负责发送&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;*/&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;virtual void IncEval(const FRAG_T&amp;amp; graph, CONTEXT_T&amp;amp; context,&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;message_manager_t&amp;amp; messages) = 0;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;//&lt;/span&gt;用户定义算法类必须实现&lt;span lang=&quot;EN-US&quot;&gt;PEval&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;IncEval&lt;/span&gt;方法&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;};&lt;/span&gt;&lt;/pre&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;BatchShuffleAppBase&lt;/span&gt;与&lt;span lang=&quot;EN-US&quot;&gt;ParallelAppBase&lt;/span&gt;算法类似，区别在于消息传播方式上（&lt;span lang=&quot;EN-US&quot;&gt;BatchShuffleMessageManager&lt;/span&gt;）。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;template &amp;lt;typename FRAG_T, typename CONTEXT_T&amp;gt;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;class BatchShuffleAppBase {&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt; public:&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;static constexpr bool need_split_edges = false;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;static constexpr bool need_split_edges_by_fragment = false;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;static constexpr MessageStrategy message_strategy =&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;MessageStrategy::kSyncOnOuterVertex;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;static constexpr LoadStrategy load_strategy = LoadStrategy::kOnlyOut;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;using message_manager_t = BatchShuffleMessageManager;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;BatchShuffleAppBase() = default;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;virtual ~BatchShuffleAppBase() = default;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;/**&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @brief Partial evaluation to implement.&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @note: This pure virtual function works as an interface, instructing users&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* to implement in the specific app. The PEval in the inherited apps would be&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* invoked directly, not via virtual functions.&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;*&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param graph&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param context&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param messages&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;*/&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;virtual void PEval(const FRAG_T&amp;amp; graph, CONTEXT_T&amp;amp; context,&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;message_manager_t&amp;amp; messages) = 0;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;/**&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @brief Incremental evaluation to implement.&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;*&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @note: This pure virtual function works as an interface, instructing users&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* to implement in the specific app. The IncEval in the inherited apps would&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* be invoked directly, not via virtual functions.&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;*&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param graph&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param context&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param messages&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;*/&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;virtual void IncEval(const FRAG_T&amp;amp; graph, CONTEXT_T&amp;amp; context,&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;message_manager_t&amp;amp; messages) = 0;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;};&lt;/span&gt;&lt;/pre&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;若用户继承此基类实现算法&lt;span style=&quot;mso-ansi-language:FR&quot;&gt;，&lt;/span&gt;需在算法中控制&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;message&lt;/span&gt;发送&lt;span style=&quot;mso-ansi-language:&#xa;FR&quot;&gt;，&lt;/span&gt;是对通信和计算进行重叠的优化版本。&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;template &amp;lt;typename FRAG_T, typename CONTEXT_T&amp;gt;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;class AutoAppBase {&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt; &lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;public:&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;static constexpr bool need_split_edges = false;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;static constexpr bool need_split_edges_by_fragment = false;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;static constexpr MessageStrategy message_strategy =&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;MessageStrategy::kSyncOnOuterVertex;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;static constexpr LoadStrategy load_strategy = LoadStrategy::kOnlyOut;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;DE&quot; style=&quot;mso-ansi-language:DE&quot;&gt;using message_manager_t = AutoParallelMessageManager&amp;lt;FRAG_T&amp;gt;;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;DE&quot; style=&quot;mso-ansi-language:DE&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;AutoAppBase() = default;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;DE&quot; style=&quot;mso-ansi-language:DE&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;virtual ~AutoAppBase() = default;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;DE&quot; style=&quot;mso-ansi-language:DE&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;DE&quot; style=&quot;mso-ansi-language:DE&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;/**&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;DE&quot; style=&quot;mso-ansi-language:DE&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @brief Partial evaluation to implement.&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;DE&quot; style=&quot;mso-ansi-language:DE&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;* @note: This pure virtual function works as an interface, instructing users&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* to implement in the specific app. The PEval in the inherited apps would be&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* invoked directly, not via virtual functions.&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;*&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param graph&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param context&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;*/&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;virtual void PEval(const FRAG_T&amp;amp; graph, CONTEXT_T&amp;amp; context) = 0;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;/**&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @brief Incremental evaluation to implement.&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @note: This pure virtual function works as an interface, instructing users&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* to implement in the specific app. The IncEval in the inherited apps would&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* be invoked directly, not via virtual functions.&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;*&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param graph&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param context&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;*/&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;virtual void IncEval(const FRAG_T&amp;amp; graph, CONTEXT_T&amp;amp; context) = 0;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;};&lt;/span&gt;&lt;/pre&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;AutoAppBase&lt;/span&gt;方式&lt;span style=&quot;mso-ansi-language:FR&quot;&gt;，&lt;/span&gt;数据同步由&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:&#xa;FR&quot;&gt;Context&lt;/span&gt;类存储&lt;span style=&quot;mso-ansi-language:FR&quot;&gt;，&lt;/span&gt;通信过程由&lt;strong&gt;&lt;span lang=&quot;FR&quot; style=&quot;font-family:宋体;mso-bidi-font-family:宋体;mso-ansi-language:FR&quot;&gt;AutoParallelMessageManager&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span style=&quot;font-family:宋体;mso-bidi-font-family:宋体&quot;&gt;类保证&lt;/span&gt;&lt;/strong&gt;。&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;下面&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;sssp_auto(libgrape-lite/examples/analytical_apps/sssp/sssp.h)&lt;/span&gt;是基于&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;dijstra&lt;/span&gt;算法的基础版本。&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;本节对&lt;span lang=&quot;EN-US&quot;&gt;sssp_auto&lt;/span&gt;进行分析：&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;void PEval(const fragment_t&amp;amp; frag, context_t&amp;amp; ctx) {&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;vertex_t source;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;bool native_source = frag.GetInnerVertex(ctx.source_id, source);&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;std::priority_queue&amp;lt;std::pair&amp;lt;double, vertex_t&amp;gt;&amp;gt; heap;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;if (native_source) {&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;ctx.partial_result.SetValue(source, 0.0);&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;heap.emplace(0, source);&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;Dijkstra(frag, ctx, heap);&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;}&lt;/span&gt;&lt;/pre&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;PEval&lt;/span&gt;初始化参数，其中&lt;span lang=&quot;EN-US&quot;&gt;fragment_t&lt;/span&gt;为本地存储的子图信息，包含了点边上的数据类型；当计算时通过&lt;span lang=&quot;EN-US&quot;&gt;context&lt;/span&gt;为保存当前&lt;span lang=&quot;EN-US&quot;&gt;query&lt;/span&gt;的上下文信息。如上第三行：通过&lt;span lang=&quot;EN-US&quot;&gt;context&lt;/span&gt;传入的全局&lt;span lang=&quot;EN-US&quot;&gt;source_id&lt;/span&gt;获取到本地&lt;span lang=&quot;EN-US&quot;&gt;source_id&lt;/span&gt;，可见&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;建立了一个全局&lt;span lang=&quot;EN-US&quot;&gt;vid &lt;/span&gt;到本地&lt;span lang=&quot;EN-US&quot;&gt;vid&lt;/span&gt;的映射，如此&lt;span lang=&quot;EN-US&quot;&gt;souce_id&lt;/span&gt;在本地的&lt;span lang=&quot;EN-US&quot;&gt;fragment&lt;/span&gt;中，则入队列（&lt;span lang=&quot;EN-US&quot;&gt;line 8&lt;/span&gt;），再通过&lt;span lang=&quot;EN-US&quot;&gt;dijkstra&lt;/span&gt;算法计算&lt;span lang=&quot;EN-US&quot;&gt;sssp&lt;/span&gt;。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;PT-BR&quot; style=&quot;mso-ansi-language:PT-BR&quot;&gt;// sequential Dijkstra algorithm for SSSP.&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;PT-BR&quot; style=&quot;mso-ansi-language:PT-BR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;void Dijkstra(const fragment_t&amp;amp; frag, context_t&amp;amp; ctx,&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;std::priority_queue&amp;lt;std::pair&amp;lt;double, vertex_t&amp;gt;&amp;gt;&amp;amp; heap) {&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;{&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;auto inner_vertices = frag.InnerVertices();&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;VertexArray&amp;lt;typename FRAG_T::inner_vertices_t, bool&amp;gt; modified(&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;inner_vertices, false);&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;double distu, distv, ndistv;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;vertex_t v, u;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;while (!heap.empty()) {&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;u = heap.top().second;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;distu = -heap.top().first;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;heap.pop();&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;// since we are going to relax from u by the&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;// current partial_result of u, we reset its&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;// updated state back to false&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;ES&quot; style=&quot;mso-ansi-language:ES&quot;&gt;ctx.partial_result.Reset(u);&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;ES&quot; style=&quot;mso-ansi-language:ES&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;ES&quot; style=&quot;mso-ansi-language:ES&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;if (modified[u]) {&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;continue;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;modified[u] = true;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;auto es = frag.GetOutgoingAdjList(u);&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;for (auto&amp;amp; e : es) {&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;v = e.get_neighbor();&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;distv = ctx.partial_result[v];&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;ndistv = distu + e.get_data();&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;if (distv &amp;gt; ndistv) {&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;ctx.partial_result.SetValue(v, ndistv);&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;if (frag.IsInnerVertex(v)) {&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;heap.emplace(-ndistv, v);&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;PT-BR&quot; style=&quot;mso-ansi-language:PT-BR&quot;&gt;}&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;// sequential Dijkstra algorithm for SSSP.&lt;/span&gt;&lt;/pre&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;需要注意的是&lt;span lang=&quot;EN-US&quot;&gt;line 28-38&lt;/span&gt;行，&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;又对&lt;span lang=&quot;EN-US&quot;&gt;source_id&lt;/span&gt;对出边进行计算，特别是在&lt;span lang=&quot;EN-US&quot;&gt;line 34-36&lt;/span&gt;，又对&lt;span lang=&quot;EN-US&quot;&gt;dst&lt;/span&gt;是在本地&lt;span lang=&quot;EN-US&quot;&gt;fragment&lt;/span&gt;时，在本地子图上的计算。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;此时可见，向&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;发送&lt;span lang=&quot;EN-US&quot;&gt;Mi&lt;/span&gt;是由框架中的&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;维护的。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;FR&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt;mso-ansi-language:FR&quot;&gt;IncEval&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;FR&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&#xa;&lt;/span&gt;void IncEval(const fragment_t&amp;amp; frag, context_t&amp;amp; ctx) {&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;FR&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;auto inner_vertices = frag.InnerVertices();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;FR&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt;mso-ansi-language:FR&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;FR&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;std::priority_queue&amp;lt;std::pair&amp;lt;double, vertex_t&amp;gt;&amp;gt; heap;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;FR&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt;mso-ansi-language:FR&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;FR&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;NO-BOK&quot; style=&quot;font-size:12.0pt;font-family:宋体;&#xa;mso-bidi-font-family:宋体;mso-font-kerning:0pt;mso-ansi-language:NO-BOK&quot;&gt;for&#xa;(auto&amp;amp; v : inner_vertices) {&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;NO-BOK&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt;mso-ansi-language:NO-BOK&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:&#xa;12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;if&#xa;(ctx.partial_result.IsUpdated(v)) {&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;heap.emplace(-ctx.partial_result.GetValue(v), v);&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;Dijkstra(frag,&#xa;ctx, heap);&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;line 7-9&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;，算法将更新数据插入到&lt;span lang=&quot;EN-US&quot;&gt;heap&lt;/span&gt;中，只对更新后的数据进行&lt;span lang=&quot;EN-US&quot;&gt;Dijkstra&lt;/span&gt;计算。此处可见所有的算法进需要顺序编程，不需考虑并行编码的问题。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;GRAPE&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;将&lt;span lang=&quot;EN-US&quot;&gt;worker 0&lt;/span&gt;作为&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;cpu&lt;/span&gt;执行过程见&lt;span lang=&quot;EN-US&quot;&gt;libgrape-lite/grape/worker/worker.h&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;template &amp;lt;class... Args&amp;gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;void&#xa;Query(Args&amp;amp;&amp;amp;... args) {&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;FR&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt;mso-ansi-language:FR&quot;&gt;double t = GetCurrentTime();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;FR&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt;mso-ansi-language:FR&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;FR&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;MPI_Barrier(comm_spec_.comm());&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;FR&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt;mso-ansi-language:FR&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;FR&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;&#xa;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;context_-&amp;gt;Init(messages_,&#xa;std::forward&amp;lt;Args&amp;gt;(args)...);&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;processMutation();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;int round = 0;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;messages_.Start();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;messages_.StartARound();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;runPEval();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;processMutation();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;messages_.FinishARound();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;if&#xa;(comm_spec_.worker_id() == kCoordinatorRank) {&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;VLOG(1)&#xa;&amp;lt;&amp;lt; &quot;[Coordinator]: Finished PEval, time: &quot; &amp;lt;&amp;lt;&#xa;GetCurrentTime() - t&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;&amp;lt;&amp;lt; &quot; sec&quot;;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;int step = 1;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;while&#xa;(!messages_.ToTerminate()) {&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;t =&#xa;GetCurrentTime();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;round++;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;messages_.StartARound();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;runIncEval();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;processMutation();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;messages_.FinishARound();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;if&#xa;(comm_spec_.worker_id() == kCoordinatorRank) {&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;VLOG(1)&#xa;&amp;lt;&amp;lt; &quot;[Coordinator]: Finished IncEval - &quot; &amp;lt;&amp;lt; step &amp;lt;&amp;lt;&#xa;&quot;, time: &quot;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;&amp;lt;&amp;lt; GetCurrentTime() - t &amp;lt;&amp;lt; &quot; sec&quot;;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;++step;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;MPI_Barrier(comm_spec_.comm());&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;messages_.Finalize();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;GRAPE&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;在&lt;span lang=&quot;EN-US&quot;&gt;query&lt;/span&gt;的执行过程中，在每个超步之间并未强制要求大同步。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan;mso-outline-level:&#xa;1&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size:19.5pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:18.0pt&quot;&gt;总结&lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:&#xa;24.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:18.0pt&quot;&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;GRAPE&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;提出了比较轻量化的编程模式，将并行模块隐藏到引擎内部，同时也支持&lt;span lang=&quot;EN-US&quot;&gt;GPU&lt;/span&gt;计算加速。由图计算本身的特点决定，&lt;span lang=&quot;EN-US&quot;&gt;GPU&lt;/span&gt;对计算引擎的提效有限，这一点需要实验验证。对&lt;span lang=&quot;EN-US&quot;&gt;GRAPH&lt;/span&gt;的计算模式给出正确性证明。分布对&lt;span lang=&quot;EN-US&quot;&gt;BSP&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;MapReduce&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;PRAM&lt;/span&gt;的算法给出了等价类算法实现。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;GRAPE&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;在&lt;span lang=&quot;EN-US&quot;&gt;github&lt;/span&gt;主站上对比了&lt;span lang=&quot;EN-US&quot;&gt;PowerGraph&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;Gimini&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;Plato&lt;/span&gt;的&lt;span lang=&quot;EN-US&quot;&gt;benchmark&lt;/span&gt;给出了对比测试结果。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:&#xa;0pt&quot;&gt;&lt;span style=&quot;mso-no-proof:yes&quot;&gt;&lt;img border=&quot;0&quot; width=&quot;415&quot; height=&quot;624&quot; src=&quot;file:////Users/wangjun126/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image009.png&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:&#xa;0pt&quot;&gt;从结果上看&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;的测试结果明显优于&lt;span lang=&quot;EN-US&quot;&gt;Gemini&lt;/span&gt;及&lt;span lang=&quot;EN-US&quot;&gt;PowerGraph&lt;/span&gt;。分析原因：主要还是来自于&lt;span lang=&quot;EN-US&quot;&gt;PIE&lt;/span&gt;的以子图为中心的计算模式，减少了了不必要通信。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;GRAPE&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;的基于子图的计算，要求算法符合分配率原则，在路径分析上具有良好的性能表现。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;GRAPE&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;不是很适合计算密集型的算法执行，&lt;span lang=&quot;EN-US&quot;&gt;PageRank&lt;/span&gt;、特征向量中心度等每一个跳的访问都需要全局同步。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:&#xa;0pt&quot;&gt;从实验结果分析：&lt;span lang=&quot;EN-US&quot;&gt;GeminiGraph&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;Plato&lt;/span&gt;引擎执行效率应该会优于&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;GRAPE&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;更适合在线增量图遍历、匹配、联通度、协同过滤类查询操作。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:&#xa;0pt&quot;&gt;阿里收购&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;之后，又在&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;基础上开发&lt;span lang=&quot;EN-US&quot;&gt;GraphScope&lt;/span&gt;引擎，为其提供了&lt;span lang=&quot;EN-US&quot;&gt;Python Client&lt;/span&gt;，支持特定算子。支持&lt;span lang=&quot;EN-US&quot;&gt;ECS&lt;/span&gt;&lt;b&gt;弹性&lt;/b&gt;部署，满足不同的计算规模，以应对现实图应用程序多变的规模，多样性和复杂性。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:&#xa;0pt&quot;&gt;作为图计算爱好者，在工作中可借鉴之处：&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;1.&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:宋体;&#xa;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;根据&lt;span lang=&quot;EN-US&quot;&gt;vid&lt;/span&gt;进行&lt;span lang=&quot;EN-US&quot;&gt;hash&lt;/span&gt;切图，保证了点边增量存储；&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;2.vector&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;存储点边；&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;3.query&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;的执行模式更适合在线图计算场景，模式类似流计算&lt;span lang=&quot;EN-US&quot;&gt;query&lt;/span&gt;执行过程。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;grape&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;设计上代码比较复杂，&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;GRAPE &lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;通过&lt;span lang=&quot;EN-US&quot;&gt;LDBC&lt;/span&gt;测试可以实现&lt;span lang=&quot;EN-US&quot;&gt;0.1ms&lt;/span&gt;的&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:&#xa;0pt&quot;&gt;我曾经在&lt;span lang=&quot;EN-US&quot;&gt;sf100&lt;/span&gt;上，通过&lt;span lang=&quot;EN-US&quot;&gt;gemini&lt;/span&gt;引擎，使用&lt;span lang=&quot;EN-US&quot;&gt;std::map&lt;/span&gt;实现&lt;span lang=&quot;EN-US&quot;&gt;index&lt;/span&gt;，实现数据遍历。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:&#xa;0pt&quot;&gt;自构建内存池&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;std::fill_n&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://github.com/alibaba/libgrape-lite/tree/v0.1.0&quot;&gt;https://github.com/alibaba/libgrape-lite/tree/v0.1.0&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;github tag&lt;/span&gt;：&lt;span lang=&quot;EN-US&quot;&gt;v0.1.0&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h1&gt;&lt;span style=&quot;font-size:19.5pt&quot;&gt;参考文档&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h1&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://www.vldb.org/pvldb/vol10/p1889-fan.pdf&quot;&gt;http://www.vldb.org/pvldb/vol10/p1889-fan.pdf&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://homepages.inf.ed.ac.uk/wenfei/papers/sigmod17-GRAPE.pdf&quot;&gt;https://homepages.inf.ed.ac.uk/wenfei/papers/sigmod17-GRAPE.pdf&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://graphscope.io/docs/&quot;&gt;https://graphscope.io/docs/&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;https://github.com/alibaba/libgrape-lite.git&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://github.com/alibaba/GraphScope.git&quot;&gt;https://github.com/alibaba/GraphScope.git&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://humming80.github.io/papers/giraph++.pdf&quot;&gt;https://humming80.github.io/papers/giraph++.pdf&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://www.usenix.org/conference/atc15/technical-session/presentation/zhu&quot;&gt;https://www.usenix.org/conference/atc15/technical-session/presentation/zhu&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://ipads.se.sjtu.edu.cn/projects/powerlyra/powerlyra-eurosys-final.pdf&quot;&gt;https://ipads.se.sjtu.edu.cn/projects/powerlyra/powerlyra-eurosys-final.pdf&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://www.usenix.org/conference/osdi16/technical-sessions/presentation/zhu&quot;&gt;https://www.usenix.org/conference/osdi16/technical-sessions/presentation/zhu&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://imbajin.com/2021-09-20-%E5%9B%BE%E8%AE%A1%E7%AE%97%E7%B3%BB%E7%BB%9FGraphScope/&quot;&gt;http://imbajin.com/2021-09-20-%E5%9B%BE%E8%AE%A1%E7%AE%97%E7%B3%BB%E7%BB%9FGraphScope/&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://github.com/alibaba/libgrape-lite/blob/master/Performance.md&quot;&gt;https://github.com/alibaba/libgrape-lite/blob/master/Performance.md&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/468990756&quot;&gt;https://zhuanlan.zhihu.com/p/468990756&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://caffe2.ai/doxygen-c/html/classska_1_1flat__hash__map.html&quot;&gt;https://caffe2.ai/doxygen-c/html/classska_1_1flat__hash__map.html&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://111qqz.com/2021/08/ska_flat_hash_map_notes/&quot;&gt;https://111qqz.com/2021/08/ska_flat_hash_map_notes/&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://dirtysalt.github.io/html/hashtable-perf-comparison.html&quot;&gt;https://dirtysalt.github.io/html/hashtable-perf-comparison.html&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; style=&quot;tab-stops:44.65pt&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;" link="&lt;p class=&quot;MsoNormal&quot;&gt;图计算引擎分析&lt;span lang=&quot;EN-US&quot;&gt;——GRAPE&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h1&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-tab-count:1&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;font-size:19.5pt&quot;&gt;前言&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h1&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;GRAPE&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;是&lt;span lang=&quot;EN-US&quot;&gt;2017&lt;/span&gt;年发表的分布式并行图计算系统。&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;在计算模型实现动态更新的问题。&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;在设计上采用&lt;span lang=&quot;EN-US&quot;&gt;BSP&lt;/span&gt;并行计算模型，要求每一个超步算法设计必须满足分配率的原则。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;GRAPE&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;引擎可以模拟实现&lt;span lang=&quot;EN-US&quot;&gt;BSP&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;PRAM&lt;/span&gt;（&lt;span lang=&quot;EN-US&quot;&gt;(Parallel Random Access Machine&lt;/span&gt;）、&lt;span lang=&quot;EN-US&quot;&gt;MapReduce&lt;/span&gt;类算法，实现插件式无障碍改写。保证计算的正确性。&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;支持了遍历、模式匹配、连通性计算、协同过滤等算法。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:&#xa;0pt&quot;&gt;原文中提到了优势：&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:&#xa;0pt&quot;&gt;简化编码：&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;只需要用户提供三个顺序算法即可（&lt;span lang=&quot;EN-US&quot;&gt;PEval&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;IncEval&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;Assemble Partial Result&lt;/span&gt;），并行计算由引擎保证；&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:&#xa;0pt&quot;&gt;半自动化并行计算：只要算法实现满足顺序执行正确，那么也能保证期并发执行的正确性；&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:&#xa;0pt&quot;&gt;图级别的优化：在架构层面上，为图提供了索引、压缩、分区等进行了优化；&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:&#xa;0pt&quot;&gt;更好的性能：对比现有以点为中心的计算引擎&lt;span lang=&quot;EN-US&quot;&gt;Giraph&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;GraphLab&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;Blogel&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;不但降低编程的复杂度，而且也在性能上取得了优秀的效果。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;GRAPE&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;在设计遵循&lt;span lang=&quot;EN-US&quot;&gt;“think&#xa;like a graph”&lt;/span&gt;的设计，将分布式图分析问题解耦为多个单机、顺序、子图求解问题。从设计上来说，多个子图的计算是相互独立的，为了协调计算分布式计算的一致性，&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;引入了协调器&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:&#xa;0pt&quot;&gt;，&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;上并不保存&lt;span lang=&quot;EN-US&quot;&gt;edge&lt;/span&gt;数据。&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;在两个超步之间扮演着重要的角色，如果更新量比较大，&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;势必会成为系统的瓶颈。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan;mso-outline-level:&#xa;1&quot;&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:19.5pt;font-family:宋体;mso-bidi-font-family:&#xa;宋体;mso-font-kerning:18.0pt&quot;&gt;GRAPE&lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span style=&quot;font-size:19.5pt;&#xa;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:18.0pt&quot;&gt;架构设计&lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:24.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:18.0pt&quot;&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;GRAPE&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;同时支持切点、切边的&lt;span lang=&quot;EN-US&quot;&gt;Partition&lt;/span&gt;策略，用户可根据算法灵活选择；用户可根据数据规模、算法控制集群规模。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; style=&quot;tab-stops:44.65pt&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-no-proof:yes&quot;&gt;&lt;img width=&quot;415&quot; height=&quot;241&quot; src=&quot;file:////Users/wangjun126/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image001.png&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;查询初始阶段：在第一个超步之前，协调器&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;负责向所有的&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;发送相同的&lt;span lang=&quot;EN-US&quot;&gt;Query&lt;/span&gt;，并且在两个超步之间负责协调计算数据。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;并行计算模型可拆分为三个部分：&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;1.PEval&lt;/span&gt;：在第一个超步中，在本地子图上计算，生成初始计算结果，并将&lt;span lang=&quot;EN-US&quot;&gt;Q(Fi)&lt;/span&gt;结果&lt;span lang=&quot;EN-US&quot;&gt;Mi&lt;/span&gt;发送给&lt;span lang=&quot;EN-US&quot;&gt;P0;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;2.IncEval:&lt;/span&gt;分为两部分。&lt;span lang=&quot;EN-US&quot;&gt;a.P0&lt;/span&gt;获取并汇总其他&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;（&lt;span lang=&quot;EN-US&quot;&gt;Pi&lt;/span&gt;）是否有更新操作；&lt;span lang=&quot;EN-US&quot;&gt;b.worker&#xa;Pi &lt;/span&gt;获取&lt;span lang=&quot;EN-US&quot;&gt;Q(Fi ⊕Mi)&lt;/span&gt;进行&lt;span lang=&quot;EN-US&quot;&gt;IncEval&lt;/span&gt;计算更新&lt;span lang=&quot;EN-US&quot;&gt;Fi&lt;/span&gt;数据，&lt;span lang=&quot;EN-US&quot;&gt;1&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;2&lt;/span&gt;步循环计算&lt;span lang=&quot;EN-US&quot;&gt;,&lt;/span&gt;直至迭代结果收敛；&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;3.Assemble&lt;/span&gt;：&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;从所有&lt;span lang=&quot;EN-US&quot;&gt;Worker&lt;/span&gt;上拉取结果，并聚合生成最终结果，算法执行完成。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; style=&quot;tab-stops:44.65pt&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-no-proof:yes&quot;&gt;&lt;img width=&quot;415&quot; height=&quot;317&quot; src=&quot;file:////Users/wangjun126/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image002.png&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; style=&quot;tab-stops:44.65pt&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-no-proof:yes&quot;&gt;&lt;img width=&quot;415&quot; height=&quot;269&quot; src=&quot;file:////Users/wangjun126/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image003.png&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;原文认为&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;在以下五个方面做出了贡献：&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;（&lt;span lang=&quot;EN-US&quot;&gt;1&lt;/span&gt;）引入&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;并行模型&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;（&lt;span lang=&quot;EN-US&quot;&gt;2&lt;/span&gt;）理论证明了&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;的正确性；通过实验证明了&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;可以替代&lt;span lang=&quot;EN-US&quot;&gt;MapReduce&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;BSP&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;PRAM&lt;/span&gt;。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;（&lt;span lang=&quot;EN-US&quot;&gt;3&lt;/span&gt;）在&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;上实现不同种类的图计算算法（图遍历类、匹配类、联通度类、协同过滤类）。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;（&lt;span lang=&quot;EN-US&quot;&gt;4&lt;/span&gt;）&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;支持并行计算、消息传递、容错、一致性。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;（&lt;span lang=&quot;EN-US&quot;&gt;5&lt;/span&gt;）对比通过实验对比了三种引擎：&lt;span lang=&quot;EN-US&quot;&gt;BSP&lt;/span&gt;以点为中心的&lt;span lang=&quot;EN-US&quot;&gt;Giraph&lt;/span&gt;、异步以点为中心的&lt;span lang=&quot;EN-US&quot;&gt;GraphLab&lt;/span&gt;、以块为中心的&lt;span lang=&quot;EN-US&quot;&gt;Blogel&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;的性能是最优的。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h1&gt;&lt;span style=&quot;font-size:19.5pt&quot;&gt;以点为中心、以边为中心、以子图为中心计算模式的比较&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h1&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;在分布式计算系统中，系统的瓶颈往往卡在&lt;span lang=&quot;EN-US&quot;&gt;IO&lt;/span&gt;吞吐（其中&lt;span lang=&quot;EN-US&quot;&gt;IO&lt;/span&gt;包括网络&lt;span lang=&quot;EN-US&quot;&gt;IO&lt;/span&gt;和磁盘&lt;span lang=&quot;EN-US&quot;&gt;IO&lt;/span&gt;）。在现有的硬件基础上，如何降低&lt;span lang=&quot;EN-US&quot;&gt;IO&lt;/span&gt;开销就成为了解决分布式系统的核心问题。下面列举了三种编程模式及代表框架：&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;table class=&quot;MsoNormalTable&quot; border=&quot;1&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; style=&quot;border-collapse:collapse;mso-yfti-tbllook:1184&quot;&gt;&#xa; &lt;tbody&gt;&lt;tr style=&quot;mso-yfti-irow:0;mso-yfti-firstrow:yes&quot;&gt;&#xa;  &lt;td width=&quot;165&quot; style=&quot;width:123.75pt;padding:.75pt .75pt .75pt .75pt&quot;&gt;&#xa;  &lt;p class=&quot;sl-paragraph&quot;&gt;&lt;strong&gt;&lt;span style=&quot;font-family:宋体;mso-bidi-font-family:&#xa;  宋体&quot;&gt;计算模式&lt;/span&gt;&lt;/strong&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;  &lt;/td&gt;&#xa;  &lt;td width=&quot;375&quot; style=&quot;width:281.25pt;padding:.75pt .75pt .75pt .75pt&quot;&gt;&#xa;  &lt;p class=&quot;sl-paragraph&quot;&gt;&lt;strong&gt;&lt;span style=&quot;font-family:宋体;mso-bidi-font-family:&#xa;  宋体&quot;&gt;代表性框架&lt;/span&gt;&lt;/strong&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;  &lt;/td&gt;&#xa; &lt;/tr&gt;&#xa; &lt;tr style=&quot;mso-yfti-irow:1&quot;&gt;&#xa;  &lt;td width=&quot;165&quot; style=&quot;width:123.75pt;padding:.75pt .75pt .75pt .75pt&quot;&gt;&#xa;  &lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span style=&quot;font-size:16.5pt&quot;&gt;以点为中心&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;  &lt;/td&gt;&#xa;  &lt;td width=&quot;375&quot; style=&quot;width:281.25pt;padding:.75pt .75pt .75pt .75pt&quot;&gt;&#xa;  &lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;Graphx&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;GraphLab&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;PowerGraph&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;Gemini&lt;/span&gt;等&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;  &lt;/td&gt;&#xa; &lt;/tr&gt;&#xa; &lt;tr style=&quot;mso-yfti-irow:2&quot;&gt;&#xa;  &lt;td width=&quot;165&quot; style=&quot;width:123.75pt;padding:.75pt .75pt .75pt .75pt&quot;&gt;&#xa;  &lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span style=&quot;font-size:16.5pt&quot;&gt;以边为中心&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;  &lt;/td&gt;&#xa;  &lt;td width=&quot;375&quot; style=&quot;width:281.25pt;padding:.75pt .75pt .75pt .75pt&quot;&gt;&#xa;  &lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;X-Stream&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;GridGraph&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot; style=&quot;color:#121212&quot;&gt;Chaos&lt;/span&gt;&lt;span style=&quot;color:#121212&quot;&gt;等&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;  &lt;/td&gt;&#xa; &lt;/tr&gt;&#xa; &lt;tr style=&quot;mso-yfti-irow:3;mso-yfti-lastrow:yes&quot;&gt;&#xa;  &lt;td width=&quot;165&quot; style=&quot;width:123.75pt;padding:.75pt .75pt .75pt .75pt&quot;&gt;&#xa;  &lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span style=&quot;font-size:16.5pt&quot;&gt;以子图为中心&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;  &lt;/td&gt;&#xa;  &lt;td width=&quot;375&quot; style=&quot;width:281.25pt;padding:.75pt .75pt .75pt .75pt&quot;&gt;&#xa;  &lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;Giraph++&lt;/span&gt;等&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;  &lt;/td&gt;&#xa; &lt;/tr&gt;&#xa;&lt;/tbody&gt;&lt;/table&gt;&#xa;&#xa;&lt;h2&gt;&lt;span style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;以点为中心&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;自&lt;span lang=&quot;EN-US&quot;&gt;Pregel&lt;/span&gt;发布以来，绝大部分开源引擎都采用以点为中心的计算模式，用户只需要考虑处理点的逻辑，通过边进行数据传播，进而扩展到整图。通过&lt;span lang=&quot;EN-US&quot;&gt;BSP&lt;/span&gt;模式控制整个计算过程。框架有&lt;span lang=&quot;EN-US&quot;&gt;Graphx&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;Giraph&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;GraphLab&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;PowerGraph&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;Gemini&lt;/span&gt;等。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;Pregel&lt;/span&gt;引入了&lt;span lang=&quot;EN-US&quot;&gt;GAS&lt;/span&gt;模式，&lt;span lang=&quot;EN-US&quot;&gt;GAS&lt;/span&gt;模式一般采用以点为中心的计算模式。以点为中心的计算模式更符合人的思维模式，算法表示更直观形象。将&lt;span lang=&quot;EN-US&quot;&gt;Pregel&lt;/span&gt;中的每个&lt;span lang=&quot;EN-US&quot;&gt;SuperStep&lt;/span&gt;一分为三，每个&lt;span lang=&quot;EN-US&quot;&gt;SubStep&lt;/span&gt;上对应一个用户自定义的操作。一方面使得用户的自由度更大，另一方面能明显提升个&lt;span lang=&quot;EN-US&quot;&gt;SubStep&lt;/span&gt;直接的并行计算性能，特别是当顶点关联的边非常大的时候。&lt;span lang=&quot;EN-US&quot;&gt;GAS&lt;/span&gt;计算模式在图计算框架&lt;span lang=&quot;EN-US&quot;&gt;PoweGraph&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;GraphLab&lt;/span&gt;中得到了很好的应用，并且在大规模关系网络或复杂图上取得了非常不错的效果。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;而&lt;span lang=&quot;EN-US&quot;&gt;Gemini&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;Plato&lt;/span&gt;将点分为若干段，并采用双更新模式（&lt;span lang=&quot;EN-US&quot;&gt;Push/Pull&lt;/span&gt;）替代了&lt;span lang=&quot;EN-US&quot;&gt;GAS&lt;/span&gt;模式，通过更新模式的选择减少了网络&lt;span lang=&quot;EN-US&quot;&gt;IO&lt;/span&gt;量。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;以点为中心的计算模式计算效率更快，更符合人的编码思维；但支持的图规模有限。往往更适用于对实时性要求较高的场景，&lt;strong&gt;&lt;span style=&quot;font-family:宋体;mso-bidi-font-family:宋体&quot;&gt;准实时性&lt;/span&gt;&lt;/strong&gt;业务。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h2&gt;&lt;span style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;以边为中心&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#121212&quot;&gt;X-Stream&lt;/span&gt;&lt;span style=&quot;color:#121212&quot;&gt;是单机&lt;span lang=&quot;EN-US&quot;&gt;in-memory&lt;/span&gt;和核外计算引擎，都将顶点分为若干区间，通过调度算法使顶点区间能放入内存中。处理一批边时，目的顶点的数据会被调度到内存中，当更新则通过&lt;/span&gt;流式处理（&lt;span lang=&quot;EN-US&quot;&gt;streaming&lt;/span&gt;）&lt;span style=&quot;color:#121212&quot;&gt;的形式从外存顺序读入或写出。&lt;span lang=&quot;EN-US&quot;&gt;GridGraph&lt;/span&gt;借鉴了&lt;span lang=&quot;EN-US&quot;&gt;X-Stream&lt;/span&gt;设计思想，使用&lt;span lang=&quot;EN-US&quot;&gt;2-level&lt;/span&gt;调度算法降低不必要的开销，优化了系统&lt;span lang=&quot;EN-US&quot;&gt;IO&lt;/span&gt;。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;Chaos&lt;/span&gt;是&lt;span lang=&quot;EN-US&quot;&gt;X-Stream&lt;/span&gt;的基于外存的分布式实现，系统通过&lt;span lang=&quot;EN-US&quot;&gt;GAS&lt;/span&gt;的方式，通过每台机器上的副本点收集数据，&lt;span lang=&quot;EN-US&quot;&gt;Apply&lt;/span&gt;阶段统计更新&lt;span lang=&quot;EN-US&quot;&gt;master vertex&lt;/span&gt;。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;以边为中心的编程模式通常借助了大容量外存扩展了内存上限，在计算效率上明显会低于以点为中心的方式，所以主要应用场景就是超大图上。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;以边为中心的图计算系统瓶颈通常是磁盘的&lt;span lang=&quot;EN-US&quot;&gt;io&lt;/span&gt;，这也是为什么在论文实验中一般都采用&lt;span lang=&quot;EN-US&quot;&gt;SSD&lt;/span&gt;硬盘的原因。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h2&gt;&lt;span style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;以子图为中心&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;上述两种计算方式只可访问一跳（&lt;span lang=&quot;EN-US&quot;&gt;one hop&lt;/span&gt;）的邻居节点。以子图为中心的计算模式通常本地存储一张子图，提高了邻居节点的访问效率。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;Giraph++&lt;/span&gt;论文中描述以子图为中心设计思想，按照&lt;span lang=&quot;EN-US&quot;&gt;vid&lt;/span&gt;的范围将图切分为&lt;span lang=&quot;EN-US&quot;&gt;n&lt;/span&gt;个子图。下图是&lt;span lang=&quot;EN-US&quot;&gt;Giraph++&lt;/span&gt;的&lt;span lang=&quot;EN-US&quot;&gt;Connected Component&lt;/span&gt;算法图示。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-no-proof:yes&quot;&gt;&lt;img width=&quot;415&quot; height=&quot;182&quot; src=&quot;file:////Users/wangjun126/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image004.png&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;也采用以子图为中心的计算模式。超步之间必须满足分配率的原则。&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;尽可能在一个超步中完成子图计算，减少网络&lt;span lang=&quot;EN-US&quot;&gt;IO&lt;/span&gt;。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;从理论上来讲，如果存储子图的跳数越深，子图遍历优势越明显。但是子图跳数越多，需要的存储空间也会成几何倍数增长。&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;中保存了&lt;span lang=&quot;EN-US&quot;&gt;2hop&lt;/span&gt;图。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;Giraph++&lt;/span&gt;也指出：尽量降低跨区域访问边，减少不必要的通信开销。子图的切分应该尽量保证满足&lt;span lang=&quot;EN-US&quot;&gt;Connected Component&lt;/span&gt;（&lt;span lang=&quot;EN-US&quot;&gt;CC&lt;/span&gt;）算法。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;假设：所有的&lt;span lang=&quot;EN-US&quot;&gt;Fragment&lt;/span&gt;切分都满足&lt;span lang=&quot;EN-US&quot;&gt;CC&lt;/span&gt;切分，超步之间的交换数据就会很少，此时引擎执行效率应该更高。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h1&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:19.5pt&quot;&gt;GRAPE&lt;/span&gt;&lt;span style=&quot;font-size:19.5pt&quot;&gt;编程模式&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h1&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;遵循&lt;span lang=&quot;EN-US&quot;&gt;BSP&lt;/span&gt;模式，由&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;节点调度其它&lt;span lang=&quot;EN-US&quot;&gt;Worker&lt;/span&gt;（&lt;span lang=&quot;EN-US&quot;&gt;1..m&lt;/span&gt;）节点的计算。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;从形象上来说上图与葡萄的结构很像，可能也是取名为&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;的原因之一。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h2&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;graph storage&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;header-only partitions fragment&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;CSC\CSR&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#252933;background:#F2F3F5&quot;&gt;flat_hash_map&#xa;&lt;/span&gt;&lt;span style=&quot;color:#252933;background:#F2F3F5&quot;&gt;是一种极其轻量级的哈希表实现，它在保证常数小的前提下有着非常优秀的性能。&lt;span lang=&quot;EN-US&quot;&gt;flat_hash_map &lt;/span&gt;使用线性探测法解决冲突，并且可以通过按需分配内存来减少空间开销。相对于&lt;span lang=&quot;EN-US&quot;&gt; unordered_map&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;flat_hash_map &lt;/span&gt;的插入&lt;span lang=&quot;EN-US&quot;&gt;/&lt;/span&gt;删除时间略长，但查找时间更短。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;使用&lt;span lang=&quot;EN-US&quot;&gt;flat_hash_map&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h2&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;The Parallel&#xa;Model of GRAPE&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;采用以子图为中心的计算，将&lt;span lang=&quot;EN-US&quot;&gt;Process&lt;/span&gt;本地子图的计算抽象为顺序计算。&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;将此编程模式定义为&lt;span lang=&quot;EN-US&quot;&gt;PIE(PEval-IncEval-Assemble)&lt;/span&gt;。采用了先局部后增量计算模式，通过每一轮的超步运算达到计算的收敛；最终由&lt;span lang=&quot;EN-US&quot;&gt;Assemble&lt;/span&gt;汇总查询结果。下面将对这三个阶段展开说明。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h2&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;PEval:Partial&#xa;Evaluation&lt;/span&gt;&lt;span style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;（局部结果评估）&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;将&lt;span lang=&quot;EN-US&quot;&gt;Query&lt;/span&gt;分发到&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;节点之后，其余&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;节点会初始化本地&lt;span lang=&quot;EN-US&quot;&gt;master&lt;/span&gt;节点的状态，根据&lt;span lang=&quot;EN-US&quot;&gt;Query&lt;/span&gt;更新并记录邻居节点的状态信息。&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;节点会根据计算结果生成更新参数，并且发送给&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;。下面我们提到的&lt;span lang=&quot;EN-US&quot;&gt;woker&lt;/span&gt;与&lt;span lang=&quot;EN-US&quot;&gt;processor&lt;/span&gt;概念是一致（&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;也是&lt;span lang=&quot;EN-US&quot;&gt;workers&lt;/span&gt;之一）。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h2&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;IncEval:&#xa;Incremental Evaluation &lt;/span&gt;&lt;span style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;（增量数据评估）&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&#xa;&#xa;&lt;p class=&quot;sl-list&quot; style=&quot;margin-left:36.0pt;text-indent:-18.0pt;mso-list:l0 level1 lfo1;&#xa;tab-stops:list 36.0pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:&#xa;10.0pt;mso-bidi-font-size:12.0pt;font-family:Symbol;mso-fareast-font-family:&#xa;Symbol;mso-bidi-font-family:Symbol&quot;&gt;&lt;span style=&quot;mso-list:Ignore&quot;&gt;·&lt;span style=&quot;font:7.0pt &amp;quot;Times New Roman&amp;quot;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span dir=&quot;LTR&quot;&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;在接收到所有&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;消息之后，需根据更新信息判断每一个&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;的状态。如果此所有的&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;已经&lt;span lang=&quot;EN-US&quot;&gt;inactive&lt;/span&gt;，则驱动此&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;的&lt;span lang=&quot;EN-US&quot;&gt;Assemble&lt;/span&gt;过程并中断。否则会&lt;span lang=&quot;EN-US&quot;&gt;route&lt;/span&gt;上一个超步的消息到此&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;。启动下一轮超步。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-list&quot; style=&quot;margin-left:36.0pt;text-indent:-18.0pt;mso-list:l0 level1 lfo1;&#xa;tab-stops:list 36.0pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:&#xa;10.0pt;mso-bidi-font-size:12.0pt;font-family:Symbol;mso-fareast-font-family:&#xa;Symbol;mso-bidi-font-family:Symbol&quot;&gt;&lt;span style=&quot;mso-list:Ignore&quot;&gt;·&lt;span style=&quot;font:7.0pt &amp;quot;Times New Roman&amp;quot;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span dir=&quot;LTR&quot;&gt;&lt;/span&gt;当&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;接收到&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;的更新消息后&lt;span lang=&quot;EN-US&quot;&gt;Q(Fi+Mi)&lt;/span&gt;的增量计算&lt;span lang=&quot;EN-US&quot;&gt;IncEval&lt;/span&gt;，在本地子图&lt;span lang=&quot;EN-US&quot;&gt;Fi&lt;/span&gt;上，将&lt;span lang=&quot;EN-US&quot;&gt;Mi&lt;/span&gt;进行计算，并向&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;发送计算结果。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;认为&lt;span lang=&quot;EN-US&quot;&gt;IncEval&lt;/span&gt;都利用了上一超步的计算结果，加锁每一超步的计算效率。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h2&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;Assemble Partial&#xa;Results(&lt;/span&gt;&lt;span style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;结果聚合&lt;span lang=&quot;EN-US&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;如果&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;认为已经没有参数变化更新了，&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;会主动从&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;上拉取结果，生成&lt;span lang=&quot;EN-US&quot;&gt;Query&lt;/span&gt;结果。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h1&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:19.5pt&quot;&gt;GRAPE API&lt;/span&gt;&lt;span style=&quot;font-size:19.5pt&quot;&gt;设计&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h1&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;开源两套代码：&lt;span lang=&quot;EN-US&quot;&gt;GraphScope&lt;/span&gt;及&lt;span lang=&quot;EN-US&quot;&gt;libgrape-lite&lt;/span&gt;。底层分析引擎实现是相同的，&lt;span lang=&quot;EN-US&quot;&gt;libgrape-lite&lt;/span&gt;提供了基础的分析框架，本文中将分析&lt;span lang=&quot;EN-US&quot;&gt;libgrape-lite&lt;/span&gt;的代码。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;libgrape-lite&lt;/span&gt;提供&lt;span lang=&quot;EN-US&quot;&gt;header&#xa;only&lt;/span&gt;基础库。此处分析参考：&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://github.com/alibaba/libgrape-lite/tree/v0.1.0&quot;&gt;https://github.com/alibaba/libgrape-lite/tree/v0.1.0&lt;span lang=&quot;EN-US&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;。&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;代码结构：&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; style=&quot;tab-stops:44.65pt&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-no-proof:yes&quot;&gt;&lt;img border=&quot;0&quot; width=&quot;415&quot; height=&quot;228&quot; src=&quot;file:////Users/wangjun126/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image005.png&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h2&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;GRAPE&lt;/span&gt;&lt;span style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;框架结构&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;下文为&lt;span lang=&quot;EN-US&quot;&gt;GraphScope&lt;/span&gt;框架设计，下面直接引用论文中的框架图。&lt;span lang=&quot;EN-US&quot;&gt;libgrape-lite&lt;/span&gt;仅提供了&lt;span lang=&quot;EN-US&quot;&gt;GRAPH Query Engine&lt;/span&gt;。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-no-proof:yes&quot;&gt;&lt;img border=&quot;0&quot; width=&quot;415&quot; height=&quot;430&quot; src=&quot;file:////Users/wangjun126/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image006.png&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;需要注意&lt;span lang=&quot;EN-US&quot;&gt;message &lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;&#xa;context&lt;/span&gt;的使用&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h3&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:15.0pt;line-height:173%&quot;&gt;Architecture&#xa;overview&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h3&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;在设计上利用率&lt;span lang=&quot;EN-US&quot;&gt;OpenMPI&#xa;mpp&lt;/span&gt;处理能力。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;构图&lt;span lang=&quot;EN-US&quot;&gt; rebalance&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-no-proof:yes&quot;&gt;&lt;img border=&quot;0&quot; width=&quot;415&quot; height=&quot;259&quot; src=&quot;file:////Users/wangjun126/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image007.png&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-no-proof:yes&quot;&gt;&lt;img border=&quot;0&quot; width=&quot;415&quot; height=&quot;305&quot; src=&quot;file:////Users/wangjun126/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image008.png&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;create and Query&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;模板参数定义：&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:blue&quot;&gt;template&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#3B3B3B&quot;&gt; &amp;lt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:&#xa;blue&quot;&gt;typename&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#267F99&quot;&gt;OID_T&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#3B3B3B&quot;&gt;, &lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:blue&quot;&gt;typename&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#267F99&quot;&gt;VID_T&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:&#xa;#3B3B3B&quot;&gt;, &lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:blue&quot;&gt;typename&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#267F99&quot;&gt;VDATA_T&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#3B3B3B&quot;&gt;, &lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:blue&quot;&gt;typename&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#267F99&quot;&gt;EDATA_T&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#3B3B3B&quot;&gt;,&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:blue&quot;&gt;LoadStrategy&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#267F99&quot;&gt;load_strategy&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#3B3B3B&quot;&gt;, &lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:blue&quot;&gt;template&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#3B3B3B&quot;&gt; &amp;lt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:&#xa;blue&quot;&gt;class&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#3B3B3B&quot;&gt;&amp;gt; &lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:blue&quot;&gt;class&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#267F99&quot;&gt;APP_T&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#3B3B3B&quot;&gt;,&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:blue&quot;&gt;typename&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#3B3B3B&quot;&gt;... &lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#267F99&quot;&gt;Args&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#3B3B3B&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color:#267F99&quot;&gt;Args&lt;/span&gt;&lt;span style=&quot;color:#267F99&quot;&gt;为算法的参数&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h3&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:15.0pt;line-height:173%&quot;&gt;Message passing&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h3&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;local (&lt;/span&gt;零拷贝&lt;span lang=&quot;EN-US&quot;&gt;)&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;通过&lt;span lang=&quot;EN-US&quot; style=&quot;color:#795E26&quot;&gt;MPI_Recv&lt;/span&gt;&lt;span style=&quot;color:#795E26&quot;&gt;、&lt;span lang=&quot;EN-US&quot;&gt;MPI_Send&lt;/span&gt;通过&lt;span lang=&quot;EN-US&quot;&gt;send_tag&lt;/span&gt;区分数据。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h3&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:15.0pt;line-height:173%&quot;&gt;Graph partition&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h3&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;切图&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h3&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:15.0pt;line-height:173%&quot;&gt;Graph-level&#xa;optimization&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h3&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;Load balancing&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;Fault tolerance&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;Consistency&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h2&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;sssp&lt;/span&gt;&lt;span style=&quot;font-size:16.5pt;line-height:173%&quot;&gt;算法实现&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;在算法实现上，用户自定义算法类中只需要实现&lt;span lang=&quot;EN-US&quot;&gt;PEval&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;IncEval&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;Assemble&lt;/span&gt;三个函数。当我们阅读开源版本时，会发现&lt;span lang=&quot;EN-US&quot;&gt;libgrape&lt;/span&gt;是简化了输出这一部分功能，当计算收敛时，由&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;直接调用&lt;span lang=&quot;EN-US&quot;&gt;context&lt;/span&gt;的&lt;span lang=&quot;EN-US&quot;&gt;output&lt;/span&gt;方法负责输出。算法类是不需要实现&lt;span lang=&quot;EN-US&quot;&gt;Assemble&lt;/span&gt;函数的，&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;提供了&lt;span lang=&quot;EN-US&quot;&gt;3&lt;/span&gt;种&lt;span lang=&quot;EN-US&quot;&gt;AppBase&lt;/span&gt;（&lt;span lang=&quot;EN-US&quot;&gt;ParallelAppBase&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot; style=&quot;color:#267F99&quot;&gt;AutoAppBase&lt;/span&gt;&lt;span style=&quot;color:#267F99&quot;&gt;、&lt;span lang=&quot;EN-US&quot;&gt;BatchShuffleAppBase&lt;/span&gt;&lt;/span&gt;），以下为&lt;span lang=&quot;EN-US&quot;&gt;ParallelAppBase&lt;/span&gt;基类为例：&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;SSSPContext&lt;/span&gt;：数据计算&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;template &amp;lt;typename FRAG_T, typename CONTEXT_T&amp;gt;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;class ParallelAppBase {&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt; public:&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;static constexpr bool need_split_edges = false;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;static constexpr bool need_split_edges_by_fragment = false;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;static constexpr MessageStrategy message_strategy =&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;MessageStrategy::kSyncOnOuterVertex;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;static constexpr LoadStrategy load_strategy = LoadStrategy::kOnlyOut;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;using message_manager_t = ParallelMessageManager;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;ParallelAppBase() = default;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;virtual ~ParallelAppBase() = default;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;/**&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @brief Partial evaluation to implement.&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @note: This pure virtual function works as an interface, instructing users&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* to implement in the specific app. The PEval in the inherited apps would be&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* invoked directly, not via virtual functions.&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;*&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param graph // &lt;/span&gt;论文中的&lt;span lang=&quot;EN-US&quot;&gt;Fi&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param context //&lt;/span&gt;计算时本轮计算的输入、输出结果&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param messages//&lt;/span&gt;发送消息的&lt;span lang=&quot;EN-US&quot;&gt;channle&lt;/span&gt;，交由&lt;span lang=&quot;EN-US&quot;&gt;message manage&lt;/span&gt;负责发送&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;*/&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;virtual void PEval(const FRAG_T&amp;amp; graph, CONTEXT_T&amp;amp; context,&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;message_manager_t&amp;amp; messages) = 0;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;/**&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @brief Incremental evaluation to implement.&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;*&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @note: This pure virtual function works as an interface, instructing users&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* to implement in the specific app. The IncEval in the inherited apps would&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* be invoked directly, not via virtual functions.&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;*&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param graph //&lt;/span&gt;论文中的&lt;span lang=&quot;EN-US&quot;&gt;Fi&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param context//&lt;/span&gt;计算时本轮计算的输入、输出结果&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param messages//&lt;/span&gt;发送消息的&lt;span lang=&quot;EN-US&quot;&gt;channle&lt;/span&gt;，交由&lt;span lang=&quot;EN-US&quot;&gt;message manage&lt;/span&gt;负责发送&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;*/&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;virtual void IncEval(const FRAG_T&amp;amp; graph, CONTEXT_T&amp;amp; context,&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;message_manager_t&amp;amp; messages) = 0;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;//&lt;/span&gt;用户定义算法类必须实现&lt;span lang=&quot;EN-US&quot;&gt;PEval&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;IncEval&lt;/span&gt;方法&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;};&lt;/span&gt;&lt;/pre&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;BatchShuffleAppBase&lt;/span&gt;与&lt;span lang=&quot;EN-US&quot;&gt;ParallelAppBase&lt;/span&gt;算法类似，区别在于消息传播方式上（&lt;span lang=&quot;EN-US&quot;&gt;BatchShuffleMessageManager&lt;/span&gt;）。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;template &amp;lt;typename FRAG_T, typename CONTEXT_T&amp;gt;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;class BatchShuffleAppBase {&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt; public:&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;static constexpr bool need_split_edges = false;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;static constexpr bool need_split_edges_by_fragment = false;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;static constexpr MessageStrategy message_strategy =&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;MessageStrategy::kSyncOnOuterVertex;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;static constexpr LoadStrategy load_strategy = LoadStrategy::kOnlyOut;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;using message_manager_t = BatchShuffleMessageManager;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;BatchShuffleAppBase() = default;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;virtual ~BatchShuffleAppBase() = default;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;/**&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @brief Partial evaluation to implement.&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @note: This pure virtual function works as an interface, instructing users&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* to implement in the specific app. The PEval in the inherited apps would be&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* invoked directly, not via virtual functions.&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;*&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param graph&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param context&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param messages&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;*/&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;virtual void PEval(const FRAG_T&amp;amp; graph, CONTEXT_T&amp;amp; context,&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;message_manager_t&amp;amp; messages) = 0;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;/**&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @brief Incremental evaluation to implement.&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;*&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @note: This pure virtual function works as an interface, instructing users&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* to implement in the specific app. The IncEval in the inherited apps would&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* be invoked directly, not via virtual functions.&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;*&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param graph&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param context&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param messages&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;*/&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;virtual void IncEval(const FRAG_T&amp;amp; graph, CONTEXT_T&amp;amp; context,&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;message_manager_t&amp;amp; messages) = 0;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;};&lt;/span&gt;&lt;/pre&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;若用户继承此基类实现算法&lt;span style=&quot;mso-ansi-language:FR&quot;&gt;，&lt;/span&gt;需在算法中控制&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;message&lt;/span&gt;发送&lt;span style=&quot;mso-ansi-language:&#xa;FR&quot;&gt;，&lt;/span&gt;是对通信和计算进行重叠的优化版本。&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;template &amp;lt;typename FRAG_T, typename CONTEXT_T&amp;gt;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;class AutoAppBase {&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt; &lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;public:&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;static constexpr bool need_split_edges = false;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;static constexpr bool need_split_edges_by_fragment = false;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;static constexpr MessageStrategy message_strategy =&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;MessageStrategy::kSyncOnOuterVertex;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;static constexpr LoadStrategy load_strategy = LoadStrategy::kOnlyOut;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;DE&quot; style=&quot;mso-ansi-language:DE&quot;&gt;using message_manager_t = AutoParallelMessageManager&amp;lt;FRAG_T&amp;gt;;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;DE&quot; style=&quot;mso-ansi-language:DE&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;AutoAppBase() = default;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;DE&quot; style=&quot;mso-ansi-language:DE&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;virtual ~AutoAppBase() = default;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;DE&quot; style=&quot;mso-ansi-language:DE&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;DE&quot; style=&quot;mso-ansi-language:DE&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;/**&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;DE&quot; style=&quot;mso-ansi-language:DE&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @brief Partial evaluation to implement.&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;DE&quot; style=&quot;mso-ansi-language:DE&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;* @note: This pure virtual function works as an interface, instructing users&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* to implement in the specific app. The PEval in the inherited apps would be&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* invoked directly, not via virtual functions.&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;*&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param graph&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param context&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;*/&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;virtual void PEval(const FRAG_T&amp;amp; graph, CONTEXT_T&amp;amp; context) = 0;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;/**&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @brief Incremental evaluation to implement.&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @note: This pure virtual function works as an interface, instructing users&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* to implement in the specific app. The IncEval in the inherited apps would&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* be invoked directly, not via virtual functions.&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;*&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param graph&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;* @param context&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;*/&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;virtual void IncEval(const FRAG_T&amp;amp; graph, CONTEXT_T&amp;amp; context) = 0;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;};&lt;/span&gt;&lt;/pre&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;AutoAppBase&lt;/span&gt;方式&lt;span style=&quot;mso-ansi-language:FR&quot;&gt;，&lt;/span&gt;数据同步由&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:&#xa;FR&quot;&gt;Context&lt;/span&gt;类存储&lt;span style=&quot;mso-ansi-language:FR&quot;&gt;，&lt;/span&gt;通信过程由&lt;strong&gt;&lt;span lang=&quot;FR&quot; style=&quot;font-family:宋体;mso-bidi-font-family:宋体;mso-ansi-language:FR&quot;&gt;AutoParallelMessageManager&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span style=&quot;font-family:宋体;mso-bidi-font-family:宋体&quot;&gt;类保证&lt;/span&gt;&lt;/strong&gt;。&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;下面&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;sssp_auto(libgrape-lite/examples/analytical_apps/sssp/sssp.h)&lt;/span&gt;是基于&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;dijstra&lt;/span&gt;算法的基础版本。&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;本节对&lt;span lang=&quot;EN-US&quot;&gt;sssp_auto&lt;/span&gt;进行分析：&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;void PEval(const fragment_t&amp;amp; frag, context_t&amp;amp; ctx) {&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;vertex_t source;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;bool native_source = frag.GetInnerVertex(ctx.source_id, source);&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;std::priority_queue&amp;lt;std::pair&amp;lt;double, vertex_t&amp;gt;&amp;gt; heap;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;if (native_source) {&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;ctx.partial_result.SetValue(source, 0.0);&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;heap.emplace(0, source);&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;Dijkstra(frag, ctx, heap);&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;}&lt;/span&gt;&lt;/pre&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;PEval&lt;/span&gt;初始化参数，其中&lt;span lang=&quot;EN-US&quot;&gt;fragment_t&lt;/span&gt;为本地存储的子图信息，包含了点边上的数据类型；当计算时通过&lt;span lang=&quot;EN-US&quot;&gt;context&lt;/span&gt;为保存当前&lt;span lang=&quot;EN-US&quot;&gt;query&lt;/span&gt;的上下文信息。如上第三行：通过&lt;span lang=&quot;EN-US&quot;&gt;context&lt;/span&gt;传入的全局&lt;span lang=&quot;EN-US&quot;&gt;source_id&lt;/span&gt;获取到本地&lt;span lang=&quot;EN-US&quot;&gt;source_id&lt;/span&gt;，可见&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;建立了一个全局&lt;span lang=&quot;EN-US&quot;&gt;vid &lt;/span&gt;到本地&lt;span lang=&quot;EN-US&quot;&gt;vid&lt;/span&gt;的映射，如此&lt;span lang=&quot;EN-US&quot;&gt;souce_id&lt;/span&gt;在本地的&lt;span lang=&quot;EN-US&quot;&gt;fragment&lt;/span&gt;中，则入队列（&lt;span lang=&quot;EN-US&quot;&gt;line 8&lt;/span&gt;），再通过&lt;span lang=&quot;EN-US&quot;&gt;dijkstra&lt;/span&gt;算法计算&lt;span lang=&quot;EN-US&quot;&gt;sssp&lt;/span&gt;。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;PT-BR&quot; style=&quot;mso-ansi-language:PT-BR&quot;&gt;// sequential Dijkstra algorithm for SSSP.&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;PT-BR&quot; style=&quot;mso-ansi-language:PT-BR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;void Dijkstra(const fragment_t&amp;amp; frag, context_t&amp;amp; ctx,&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;std::priority_queue&amp;lt;std::pair&amp;lt;double, vertex_t&amp;gt;&amp;gt;&amp;amp; heap) {&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;{&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;auto inner_vertices = frag.InnerVertices();&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;VertexArray&amp;lt;typename FRAG_T::inner_vertices_t, bool&amp;gt; modified(&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;inner_vertices, false);&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;double distu, distv, ndistv;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;FR&quot; style=&quot;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;vertex_t v, u;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;while (!heap.empty()) {&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;u = heap.top().second;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;distu = -heap.top().first;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;heap.pop();&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;// since we are going to relax from u by the&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;// current partial_result of u, we reset its&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;// updated state back to false&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;ES&quot; style=&quot;mso-ansi-language:ES&quot;&gt;ctx.partial_result.Reset(u);&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;ES&quot; style=&quot;mso-ansi-language:ES&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;ES&quot; style=&quot;mso-ansi-language:ES&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;if (modified[u]) {&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;continue;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;modified[u] = true;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;auto es = frag.GetOutgoingAdjList(u);&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;for (auto&amp;amp; e : es) {&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;v = e.get_neighbor();&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;distv = ctx.partial_result[v];&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;ndistv = distu + e.get_data();&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;if (distv &amp;gt; ndistv) {&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;ctx.partial_result.SetValue(v, ndistv);&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;if (frag.IsInnerVertex(v)) {&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;heap.emplace(-ndistv, v);&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;PT-BR&quot; style=&quot;mso-ansi-language:PT-BR&quot;&gt;}&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;// sequential Dijkstra algorithm for SSSP.&lt;/span&gt;&lt;/pre&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;需要注意的是&lt;span lang=&quot;EN-US&quot;&gt;line 28-38&lt;/span&gt;行，&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;又对&lt;span lang=&quot;EN-US&quot;&gt;source_id&lt;/span&gt;对出边进行计算，特别是在&lt;span lang=&quot;EN-US&quot;&gt;line 34-36&lt;/span&gt;，又对&lt;span lang=&quot;EN-US&quot;&gt;dst&lt;/span&gt;是在本地&lt;span lang=&quot;EN-US&quot;&gt;fragment&lt;/span&gt;时，在本地子图上的计算。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;此时可见，向&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;发送&lt;span lang=&quot;EN-US&quot;&gt;Mi&lt;/span&gt;是由框架中的&lt;span lang=&quot;EN-US&quot;&gt;worker&lt;/span&gt;维护的。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;FR&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt;mso-ansi-language:FR&quot;&gt;IncEval&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;FR&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&#xa;&lt;/span&gt;void IncEval(const fragment_t&amp;amp; frag, context_t&amp;amp; ctx) {&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;FR&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;auto inner_vertices = frag.InnerVertices();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;FR&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt;mso-ansi-language:FR&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;FR&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;std::priority_queue&amp;lt;std::pair&amp;lt;double, vertex_t&amp;gt;&amp;gt; heap;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;FR&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt;mso-ansi-language:FR&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;FR&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;NO-BOK&quot; style=&quot;font-size:12.0pt;font-family:宋体;&#xa;mso-bidi-font-family:宋体;mso-font-kerning:0pt;mso-ansi-language:NO-BOK&quot;&gt;for&#xa;(auto&amp;amp; v : inner_vertices) {&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;NO-BOK&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt;mso-ansi-language:NO-BOK&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:&#xa;12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;if&#xa;(ctx.partial_result.IsUpdated(v)) {&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;heap.emplace(-ctx.partial_result.GetValue(v), v);&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;Dijkstra(frag,&#xa;ctx, heap);&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;line 7-9&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;，算法将更新数据插入到&lt;span lang=&quot;EN-US&quot;&gt;heap&lt;/span&gt;中，只对更新后的数据进行&lt;span lang=&quot;EN-US&quot;&gt;Dijkstra&lt;/span&gt;计算。此处可见所有的算法进需要顺序编程，不需考虑并行编码的问题。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;GRAPE&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;将&lt;span lang=&quot;EN-US&quot;&gt;worker 0&lt;/span&gt;作为&lt;span lang=&quot;EN-US&quot;&gt;P0&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;cpu&lt;/span&gt;执行过程见&lt;span lang=&quot;EN-US&quot;&gt;libgrape-lite/grape/worker/worker.h&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;template &amp;lt;class... Args&amp;gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;void&#xa;Query(Args&amp;amp;&amp;amp;... args) {&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;FR&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt;mso-ansi-language:FR&quot;&gt;double t = GetCurrentTime();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;FR&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt;mso-ansi-language:FR&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;FR&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;MPI_Barrier(comm_spec_.comm());&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;FR&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt;mso-ansi-language:FR&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;FR&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt;mso-ansi-language:FR&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;&#xa;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;context_-&amp;gt;Init(messages_,&#xa;std::forward&amp;lt;Args&amp;gt;(args)...);&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;processMutation();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;int round = 0;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;messages_.Start();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;messages_.StartARound();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;runPEval();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;processMutation();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;messages_.FinishARound();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;if&#xa;(comm_spec_.worker_id() == kCoordinatorRank) {&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;VLOG(1)&#xa;&amp;lt;&amp;lt; &quot;[Coordinator]: Finished PEval, time: &quot; &amp;lt;&amp;lt;&#xa;GetCurrentTime() - t&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;&amp;lt;&amp;lt; &quot; sec&quot;;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;int step = 1;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;while&#xa;(!messages_.ToTerminate()) {&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;t =&#xa;GetCurrentTime();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;round++;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;messages_.StartARound();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;runIncEval();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;processMutation();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;messages_.FinishARound();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;if&#xa;(comm_spec_.worker_id() == kCoordinatorRank) {&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;VLOG(1)&#xa;&amp;lt;&amp;lt; &quot;[Coordinator]: Finished IncEval - &quot; &amp;lt;&amp;lt; step &amp;lt;&amp;lt;&#xa;&quot;, time: &quot;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;&amp;lt;&amp;lt; GetCurrentTime() - t &amp;lt;&amp;lt; &quot; sec&quot;;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;++step;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#xa;&lt;/span&gt;MPI_Barrier(comm_spec_.comm());&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;messages_.Finalize();&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;&lt;span style=&quot;mso-spacerun:yes&quot;&gt;&amp;nbsp; &lt;/span&gt;}&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;GRAPE&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;在&lt;span lang=&quot;EN-US&quot;&gt;query&lt;/span&gt;的执行过程中，在每个超步之间并未强制要求大同步。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan;mso-outline-level:&#xa;1&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size:19.5pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:18.0pt&quot;&gt;总结&lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:&#xa;24.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:18.0pt&quot;&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;GRAPE&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;提出了比较轻量化的编程模式，将并行模块隐藏到引擎内部，同时也支持&lt;span lang=&quot;EN-US&quot;&gt;GPU&lt;/span&gt;计算加速。由图计算本身的特点决定，&lt;span lang=&quot;EN-US&quot;&gt;GPU&lt;/span&gt;对计算引擎的提效有限，这一点需要实验验证。对&lt;span lang=&quot;EN-US&quot;&gt;GRAPH&lt;/span&gt;的计算模式给出正确性证明。分布对&lt;span lang=&quot;EN-US&quot;&gt;BSP&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;MapReduce&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;PRAM&lt;/span&gt;的算法给出了等价类算法实现。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;GRAPE&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;在&lt;span lang=&quot;EN-US&quot;&gt;github&lt;/span&gt;主站上对比了&lt;span lang=&quot;EN-US&quot;&gt;PowerGraph&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;Gimini&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;Plato&lt;/span&gt;的&lt;span lang=&quot;EN-US&quot;&gt;benchmark&lt;/span&gt;给出了对比测试结果。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-bottom:0cm;text-align:left;&#xa;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:&#xa;0pt&quot;&gt;&lt;span style=&quot;mso-no-proof:yes&quot;&gt;&lt;img border=&quot;0&quot; width=&quot;415&quot; height=&quot;624&quot; src=&quot;file:////Users/wangjun126/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image009.png&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:&#xa;0pt&quot;&gt;从结果上看&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;的测试结果明显优于&lt;span lang=&quot;EN-US&quot;&gt;Gemini&lt;/span&gt;及&lt;span lang=&quot;EN-US&quot;&gt;PowerGraph&lt;/span&gt;。分析原因：主要还是来自于&lt;span lang=&quot;EN-US&quot;&gt;PIE&lt;/span&gt;的以子图为中心的计算模式，减少了了不必要通信。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;GRAPE&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;的基于子图的计算，要求算法符合分配率原则，在路径分析上具有良好的性能表现。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;GRAPE&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;不是很适合计算密集型的算法执行，&lt;span lang=&quot;EN-US&quot;&gt;PageRank&lt;/span&gt;、特征向量中心度等每一个跳的访问都需要全局同步。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:&#xa;0pt&quot;&gt;从实验结果分析：&lt;span lang=&quot;EN-US&quot;&gt;GeminiGraph&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;Plato&lt;/span&gt;引擎执行效率应该会优于&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;GRAPE&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;更适合在线增量图遍历、匹配、联通度、协同过滤类查询操作。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:&#xa;0pt&quot;&gt;阿里收购&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;之后，又在&lt;span lang=&quot;EN-US&quot;&gt;GRAPE&lt;/span&gt;基础上开发&lt;span lang=&quot;EN-US&quot;&gt;GraphScope&lt;/span&gt;引擎，为其提供了&lt;span lang=&quot;EN-US&quot;&gt;Python Client&lt;/span&gt;，支持特定算子。支持&lt;span lang=&quot;EN-US&quot;&gt;ECS&lt;/span&gt;&lt;b&gt;弹性&lt;/b&gt;部署，满足不同的计算规模，以应对现实图应用程序多变的规模，多样性和复杂性。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:&#xa;0pt&quot;&gt;作为图计算爱好者，在工作中可借鉴之处：&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;1.&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:宋体;&#xa;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;根据&lt;span lang=&quot;EN-US&quot;&gt;vid&lt;/span&gt;进行&lt;span lang=&quot;EN-US&quot;&gt;hash&lt;/span&gt;切图，保证了点边增量存储；&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;2.vector&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;存储点边；&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;3.query&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;的执行模式更适合在线图计算场景，模式类似流计算&lt;span lang=&quot;EN-US&quot;&gt;query&lt;/span&gt;执行过程。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;grape&lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;设计上代码比较复杂，&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;&#xa;mso-font-kerning:0pt&quot;&gt;GRAPE &lt;/span&gt;&lt;span style=&quot;font-size:12.0pt;font-family:&#xa;宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt&quot;&gt;通过&lt;span lang=&quot;EN-US&quot;&gt;LDBC&lt;/span&gt;测试可以实现&lt;span lang=&quot;EN-US&quot;&gt;0.1ms&lt;/span&gt;的&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:&#xa;0pt&quot;&gt;我曾经在&lt;span lang=&quot;EN-US&quot;&gt;sf100&lt;/span&gt;上，通过&lt;span lang=&quot;EN-US&quot;&gt;gemini&lt;/span&gt;引擎，使用&lt;span lang=&quot;EN-US&quot;&gt;std::map&lt;/span&gt;实现&lt;span lang=&quot;EN-US&quot;&gt;index&lt;/span&gt;，实现数据遍历。&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;mso-margin-top-alt:auto;mso-margin-bottom-alt:&#xa;auto;text-align:left;line-height:normal;mso-pagination:widow-orphan&quot;&gt;&lt;span style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:&#xa;0pt&quot;&gt;自构建内存池&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;std::fill_n&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://github.com/alibaba/libgrape-lite/tree/v0.1.0&quot;&gt;https://github.com/alibaba/libgrape-lite/tree/v0.1.0&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;github tag&lt;/span&gt;：&lt;span lang=&quot;EN-US&quot;&gt;v0.1.0&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;h1&gt;&lt;span style=&quot;font-size:19.5pt&quot;&gt;参考文档&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/h1&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://www.vldb.org/pvldb/vol10/p1889-fan.pdf&quot;&gt;http://www.vldb.org/pvldb/vol10/p1889-fan.pdf&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://homepages.inf.ed.ac.uk/wenfei/papers/sigmod17-GRAPE.pdf&quot;&gt;https://homepages.inf.ed.ac.uk/wenfei/papers/sigmod17-GRAPE.pdf&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://graphscope.io/docs/&quot;&gt;https://graphscope.io/docs/&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;https://github.com/alibaba/libgrape-lite.git&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://github.com/alibaba/GraphScope.git&quot;&gt;https://github.com/alibaba/GraphScope.git&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://humming80.github.io/papers/giraph++.pdf&quot;&gt;https://humming80.github.io/papers/giraph++.pdf&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://www.usenix.org/conference/atc15/technical-session/presentation/zhu&quot;&gt;https://www.usenix.org/conference/atc15/technical-session/presentation/zhu&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://ipads.se.sjtu.edu.cn/projects/powerlyra/powerlyra-eurosys-final.pdf&quot;&gt;https://ipads.se.sjtu.edu.cn/projects/powerlyra/powerlyra-eurosys-final.pdf&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://www.usenix.org/conference/osdi16/technical-sessions/presentation/zhu&quot;&gt;https://www.usenix.org/conference/osdi16/technical-sessions/presentation/zhu&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://imbajin.com/2021-09-20-%E5%9B%BE%E8%AE%A1%E7%AE%97%E7%B3%BB%E7%BB%9FGraphScope/&quot;&gt;http://imbajin.com/2021-09-20-%E5%9B%BE%E8%AE%A1%E7%AE%97%E7%B3%BB%E7%BB%9FGraphScope/&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://github.com/alibaba/libgrape-lite/blob/master/Performance.md&quot;&gt;https://github.com/alibaba/libgrape-lite/blob/master/Performance.md&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/468990756&quot;&gt;https://zhuanlan.zhihu.com/p/468990756&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://caffe2.ai/doxygen-c/html/classska_1_1flat__hash__map.html&quot;&gt;https://caffe2.ai/doxygen-c/html/classska_1_1flat__hash__map.html&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://111qqz.com/2021/08/ska_flat_hash_map_notes/&quot;&gt;https://111qqz.com/2021/08/ska_flat_hash_map_notes/&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;sl-paragraph&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://dirtysalt.github.io/html/hashtable-perf-comparison.html&quot;&gt;https://dirtysalt.github.io/html/hashtable-perf-comparison.html&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&#xa;&#xa;&lt;p class=&quot;MsoNormal&quot; style=&quot;tab-stops:44.65pt&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;" id="T9Aw994Uh4P9-hPocMGm-1">
          <mxCell style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
            <mxGeometry x="70" y="20" width="560" height="24500" as="geometry" />
          </mxCell>
        </UserObject>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
